'From Squeak3.6beta of ''4 July 2003'' [latest update: #5402] on 27 August 2003 at 10:14:28 pm'!"Change Set:		FileSelectionDialogDate:			13 December 2002; 4 July 2003Author:			Boris Gaernter; Magisttrello AlejandroThis change set fixes the following flaws in the MVC file selection dialog:1. The dialog is always opened in FileDirectory default. 2. The dialog is displayed in deemphasized mode; the selections are therefore not shown.3. When you try to bring up the menu of the file name list view, you run into the debugger.When used in a Morphic project, the dialog exhibits strange behavior."!!FileList methodsFor: 'initialization' stamp: 'BG 12/13/2002 15:32'!directory: dir	"Set the path of the volume to be displayed."	self okToChange ifFalse: [^ self].	self modelSleep.	directory _ dir.	self modelWakeUp.	sortMode == nil ifTrue: [sortMode _ #date].	volList _ ((Array with: '[]'), directory pathParts)  "Nesting suggestion from RvL"			withIndexCollect: [:each :i | ( String new: i-1 withAll: $ ), each].	volListIndex := volList size.	self changed: #relabel.	self changed: #volumeList.	self pattern: pattern! !!ModalSystemWindowView methodsFor: 'modal dialog' stamp: 'BG 12/13/2002 11:33'!doModalDialog	| savedArea |	self resizeInitially.	self resizeTo: 		((self windowBox)			align: self windowBox center			with: Display boundingBox aboveCenter).	savedArea _ Form fromDisplay: self windowBox.	self displayEmphasized.	self controller startUp.	self release.	savedArea displayOn: Display at: self windowOrigin.! !!PluggableFileList methodsFor: 'file list menu' stamp: 'asm 8/25/2003 18:37'!fileSelectedMenu: aMenu	| firstItems secondItems thirdItems n1 n2 n3 services |	firstItems _ self itemsForFile: self fullName asLowercase.	secondItems _ self itemsForAnyFile.	thirdItems _ self itemsForNoFile.	n1 _ firstItems size.	n2 _ n1 + secondItems size.	n3 _ n2 + thirdItems size.	services _ firstItems, secondItems, thirdItems, 			(OrderedCollection with: (SimpleServiceEntry provider: self label: 'more...' selector: #offerAllFileOptions)).	^ aMenu 		addServices2: services 		for: self		extraLines: (Array with: n1 with: n2 with: n3)! !!PluggableFileList methodsFor: 'file list menu' stamp: 'BG 12/13/2002 10:00'!itemsForNoFile   ^(OrderedCollection new: 5)        add: self serviceSortByName;        add: self serviceSortBySize;        add: self serviceSortByDate;        add: self serviceAddNewFile;        add: self serviceAddNewDirectory;        yourself! !!PluggableFileList class methodsFor: 'StandardFileMenu' stamp: 'BG 12/13/2002 15:31'!newFileMenu: aDirectory	"For compatibility with StandardFileMenu for now, answer a StandardFileMenuResult"	^(self getFilePathNameDialogWithExistenceCheck)		resultBlock: self sfmResultBlock;		directory: aDirectory;		yourself! !!PluggableFileList class methodsFor: 'StandardFileMenu' stamp: 'BG 12/13/2002 15:32'!oldFileMenu: aDirectory	"For compatibility with StandardFileMenu for now, answer a StandardFileMenuResult"	^(self getFilePathNameDialog)		resultBlock: self sfmResultBlock;		directory: aDirectory;		yourself! !