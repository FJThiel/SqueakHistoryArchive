'From Squeak3.5 of ''11 April 2003'' [latest update: #5180] on 15 April 2003 at 4:24:08 pm'!"Change Set:		KCP-0045-SystDictionDate:			15 April 2003Author:			stephane ducasseStart to clean SystemDictionary, move show* methods into SystemNavigation (prereq: KCP-0045)"!!StringHolder methodsFor: 'message list menu' stamp: 'sd 4/15/2003 16:11'!selectMessageAndEvaluate: aBlock	"Allow the user to choose one selector, chosen from the currently selected message's selector, as well as those of all messages sent by it, and evaluate aBlock on behalf of chosen selector.  If there is only one possible choice, simply make it; if there are multiple choices, put up a menu, and evaluate aBlock on behalf of the the chosen selector, doing nothing if the user declines to choose any"	| selector method messages |	(selector _ self selectedMessageName) ifNil: [^ self].	method _ (self selectedClassOrMetaClass ifNil: [^ self])		compiledMethodAt: selector		ifAbsent: [].	(method isNil or: [(messages _ method messages) size == 0])		 ifTrue: [^ aBlock value: selector].	(messages size == 1 and: [messages includes: selector])		ifTrue:			[^ aBlock value: selector].  "If only one item, there is no choice"	self systemNavigation 		showMenuOf: messages		withFirstItem: selector		ifChosenDo: [:sel | aBlock value: sel]! !!SystemDictionary methodsFor: 'deprecated' stamp: 'sd 4/15/2003 15:36'!showMenuOf: selectorCollection withFirstItem: firstItem ifChosenDo: choiceBlock	"Show a sorted menu of the given selectors, preceded by firstItem, and all	abbreviated to 40 characters.  Evaluate choiceBlock if a message is chosen."	self flag: #deprecated.	self error: 'Method Deprecated: Use SystemNavigation>>showMenuOf:withFirstItem:ifChosenDo:'! !!SystemDictionary methodsFor: 'deprecated' stamp: 'sd 4/15/2003 15:35'!showMenuOf: selectorCollection withFirstItem: firstItem ifChosenDo: choiceBlock withCaption: aCaption	self flag: #deprecated.	self error: 'Method Deprecated: Use SystemNavigation>>showMenuOf:withFirstItem:ifChosenDo:  withCaption:'! !!SystemNavigation methodsFor: 'ui' stamp: 'sd 4/15/2003 15:34'!showMenuOf: selectorCollection withFirstItem: firstItem ifChosenDo: choiceBlock	"Show a sorted menu of the given selectors, preceded by firstItem, and all	abbreviated to 40 characters.  Evaluate choiceBlock if a message is chosen."	^ self showMenuOf: selectorCollection withFirstItem: firstItem ifChosenDo: choiceBlock withCaption: nil! !!SystemNavigation methodsFor: 'ui' stamp: 'sd 4/15/2003 15:35'!showMenuOf: selectorCollection withFirstItem: firstItem ifChosenDo: choiceBlock withCaption: aCaption	"Show a sorted menu of the given selectors, preceded by firstItem, and all abbreviated to 40 characters.  Use aCaption as the menu title, if it is not nil.  Evaluate choiceBlock if a message is chosen."	| index menuLabels sortedList aMenu |	sortedList _ selectorCollection asSortedCollection.	menuLabels _ String streamContents: 		[:strm | strm nextPutAll: (firstItem contractTo: 40).		sortedList do: [:sel | strm cr; nextPutAll: (sel contractTo: 40)]].	aMenu _ PopUpMenu labels: menuLabels lines: #(1).	index _ aCaption ifNotNil: [aMenu startUpWithCaption: aCaption] ifNil: [aMenu startUp].	index = 1 ifTrue: [choiceBlock value: firstItem].	index > 1 ifTrue: [choiceBlock value: (sortedList at: index - 1)]! !