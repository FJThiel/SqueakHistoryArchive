"Change Set:		Semaphore-critical.csDate:			22 September 2001Author:			Michael Rueger <m.rueger@acm.org>Fix to a frozen Transcript problem."!'From Squeak3.1alpha of 28 February 2001 [latest update: #4344] on 22 September 2001 at 10:56:24 am'!!Semaphore methodsFor: 'mutual exclusion' stamp: 'mir 9/22/2001 10:54'!critical: mutuallyExcludedBlock 	"Evaluate mutuallyExcludedBlock only if the receiver is not currently in 	the process of running the critical: message. If the receiver is, evaluate 	mutuallyExcludedBlock after the other critical: message is finished."	| blockValue |	self wait.	[blockValue _ mutuallyExcludedBlock value]		ensure: [self signal].	^blockValue! !