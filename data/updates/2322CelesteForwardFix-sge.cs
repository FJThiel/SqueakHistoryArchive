'From Squeak2.8alpha of 4 February 2000 [latest update: #2310] on 12 June 2000 at 1:00:08 pm'!"Change Set:		137CelesteForwardFix-sgeDate:			9 June 2000Author:			Steve ElkinsThis little change fixes a little bug in Celeste>>forwardTextFor:, making it build the Content-Type email header line the same way MailMessage>>asMultiPartText does, thus allowing email clients to recognize the parts of a message forwarded MIME-style."!!Celeste methodsFor: 'sending mail' stamp: 'sge 6/9/2000 20:42'!forwardTextFor: msgID	"Answer the template for forwarding the message with the given ID."	| msg separator |	msg := self currentMessage.	^String streamContents: [ :str |		"From header"		str nextPutAll: 'From: ';		nextPutAll: Celeste userName; cr.		"Put a blank To"		str nextPutAll: 'To: '; cr.		"Add a subject modified from the original"		str nextPutAll: 'Subject: (fwd) '.		str nextPutAll: msg subject.		str cr.		"Add auto-cc if it's been set"		Celeste ccList isEmpty ifFalse: [			str nextPutAll: 'Cc: '.			str nextPutAll: Celeste ccList; cr].		"add the mime headers to make it multi-part"		separator := MailMessage generateSeparator.		str nextPutAll: 'MIME-Version: 1.0'; cr.		str nextPutAll: 'Content-type: multipart/mixed; boundary="'.		str nextPutAll: separator; nextPut: $".		str cr.		"skip down to the main part of the message"		str cr.		str nextPutAll: '--'; nextPutAll: separator; cr.		str nextPutAll: 'Content-type: text/plain'; cr; cr.		"insert the forwarded message"		str cr; cr; nextPutAll: '====forwarded===='; cr; cr.		str nextPutAll: '--'; nextPutAll: separator; cr.		str nextPutAll: 'Content-type: message/rfc822'; cr; cr.		str nextPutAll: msg text; cr.		"final separator"		str nextPutAll: '--'; nextPutAll: separator; nextPutAll: '--'; cr.	].! !