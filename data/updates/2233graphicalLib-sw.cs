'From Squeak2.8alpha of 13 January 2000 [latest update: #2220] on 29 May 2000 at 12:40:39 am'!"Change Set:		graphicalLib-swDate:			29 May 2000Author:			Scott Wallace1. Simplifies the layouts of the graphics choosers. The second set of next/prev buttons is no longer needed, now that the larger next/prev buttons can reliably be advanced exactly once by a simple click.2. If the name of the graphic is too long, it no longer makes the graphic obtrude beyond the window.3. Makes viewing and editing the system's graphical dictionary directly accessible from the system Help menu.4. Adds a new feature to the graphics browser that will directly 'hand' you a copy of any graphic you see.5.  Improves help meessages and wording in system Help menu for the graphics-related items.6.  Provides informative message when user asks to 'view image imports' when the ImageImports repository is empty."!!GraphicalMenu methodsFor: 'as yet unclassified' stamp: 'sw 5/29/2000 00:19'!initializeFor: aTarget withForms: formList coexist: aBoolean	" World primaryHand attachMorph: (GraphicalMenu new initializeFor: nil 		withForms: Form allInstances coexist: true) "	| buttons b anIndex buttonCage imageWrapper |	target _ aTarget.	coexistWithOriginal _ aBoolean.	color _ Color white.	borderColor _ Color blue darker.	borderWidth _ 1.	formChoices _ formList.	currentIndex _ 1.	self hResizing: #shrinkWrap; vResizing: #shrinkWrap.	b _ SimpleButtonMorph new target: self; borderColor: Color black.	buttons _ AlignmentMorph newRow.	buttons borderWidth: 0; inset: 0.	buttons hResizing: #shrinkWrap; vResizing: #shrinkWrap; extent: 5@5.	buttons centering: #topLeft.	buttonCage _ AlignmentMorph newColumn.	buttonCage hResizing: #shrinkWrap; vResizing: #spaceFill.	buttonCage addTransparentSpacerOfSize: (0 @ 10).	buttons addMorphBack: (b fullCopy label: 'Prev';	actionSelector: #downArrowHit; actWhen: #whilePressed).	buttons addTransparentSpacerOfSize: (9@0).	buttons addMorphBack: (b fullCopy label: 'Next';	actionSelector: #upArrowHit; actWhen: #whilePressed).	buttons addTransparentSpacerOfSize: (5@0).	buttons submorphs last color: Color white.	buttonCage addMorphBack: buttons.	buttonCage addTransparentSpacerOfSize: (0 @ 12).	buttons _ AlignmentMorph newRow.	buttons addMorphBack: (b fullCopy label: 'OK';	actionSelector: #okay).	buttons addTransparentSpacerOfSize: (5@0).	buttons addMorphBack: (b fullCopy label: 'Cancel';	actionSelector: #cancel).	buttonCage addMorphBack: buttons.	buttonCage addTransparentSpacerOfSize: (0 @ 10).	self addMorphFront: buttonCage.	imageWrapper _ Morph new color: Color transparent; extent: 102 @ 82.	imageWrapper addMorphBack: (formDisplayMorph _ ImageMorph new extent: 100 @ 100).	self addMorphBack: imageWrapper.	target ifNotNil: [(anIndex _ formList indexOf: target form ifAbsent: [nil]) ifNotNil:		[currentIndex _ anIndex]].	self updateThumbnail! !!GraphicalDictionaryMenu methodsFor: 'as yet unclassified' stamp: 'sw 5/26/2000 07:01'!handMeOne	self currentHand attachMorph: (SketchMorph new form: (formChoices at: currentIndex))! !!GraphicalDictionaryMenu methodsFor: 'as yet unclassified' stamp: 'sw 5/28/2000 23:27'!initializeFor: aTarget fromDictionary: aDictionary	|  imageWrapper anIndex aButton controlsWrapper asm |	self orientation: #vertical.	self addMorphBack: (controlsWrapper _ AlignmentMorph newRow).	self baseDictionary: aDictionary.	target _ aTarget.	coexistWithOriginal _ true.	color _ Color white.	borderColor _ Color blue darker.	borderWidth _ 1.	self hResizing: #shrinkWrap; vResizing: #shrinkWrap.	controlsWrapper borderWidth: 0; inset: 0; hResizing: #shrinkWrap; vResizing: #shrinkWrap; extent: 5@5.	controlsWrapper centering: #topLeft; color: Color white; vResizing: #spaceFill.	controlsWrapper addTransparentSpacerOfSize: (18@0).	controlsWrapper addMorphBack: (IconicButton new borderWidth: 0;			labelGraphic: (ScriptingSystem formAtKey: 'Menu'); color: Color transparent; 			actWhen: #buttonDown;			actionSelector: #showMenu; target: self;			setBalloonText: 'menu').	controlsWrapper  addTransparentSpacerOfSize: (14@0).	aButton _ SimpleButtonMorph new target: self; borderColor: Color black.	controlsWrapper addMorphBack: (aButton fullCopy		label: 'Prev';		actionSelector: #downArrowHit;		actWhen: #whilePressed;		setBalloonText: 'show previous picture';		yourself).	controlsWrapper addTransparentSpacerOfSize: (15@0).	controlsWrapper addMorphBack: (aButton fullCopy label: 'Next';	actionSelector: #upArrowHit; actWhen: #whilePressed; setBalloonText: 'show next pictutre').	self addMorphBack: controlsWrapper.	self addTransparentSpacerOfSize: (0 @ 12).	self addMorphBack:  (asm _ UpdatingStringMorph new contents: ' '; target: self; putSelector: #renameGraphicTo:; getSelector: #truncatedNameOfGraphic; useStringFormat).	asm setBalloonText: 'The name of the current graphic'. 	self addTransparentSpacerOfSize: (0 @ 12).	self addMorphBack: (AlignmentMorph newRow height: 4; borderWidth: 0; color: Color black).	imageWrapper _ Morph new color: Color transparent; extent: 190 @ 82.	imageWrapper addMorphBack: (formDisplayMorph _ ImageMorph new extent: 100 @ 100).	self addMorphBack: imageWrapper.	target ifNotNil: [(anIndex _ formChoices indexOf: target form ifAbsent: [nil]) ifNotNil:		[currentIndex _ anIndex]].	self updateThumbnail! !!GraphicalDictionaryMenu methodsFor: 'as yet unclassified' stamp: 'sw 5/26/2000 06:59'!showMenu	| aMenu |	aMenu _ MenuMorph new defaultTarget: self.	aMenu addList: #(		('remove'			removeEntry)		('rename'			renameEntry)		('repaint'			repaintEntry)		-		('find...'			findEntry)		-		('hand me one'		handMeOne)).	aMenu popUpNearHand! !!GraphicalDictionaryMenu methodsFor: 'as yet unclassified' stamp: 'sw 5/28/2000 23:19'!truncatedNameOfGraphic	^ self nameOfGraphic truncateTo: 30! !!HandMorph methodsFor: 'world menu' stamp: 'sw 5/29/2000 00:32'!helpMenu	"Build the help menu for the world."	| menu screenCtrl |	screenCtrl _ ScreenController new.	menu _ (MenuMorph entitled: 'help...') defaultTarget: self.	menu addStayUpItem.	menu add: 'about this system...' target: Smalltalk action: #aboutThisSystem.	menu balloonTextForLastItem: 'current version information.'.	menu add: 'update code from server' action: #absorbUpdatesFromServer.	menu balloonTextForLastItem: 'load latest code updates via the internet'.	menu add: 'preferences...' target: Preferences action: #openPreferencesInspector.	menu balloonTextForLastItem: 'view and change various options.'.	menu addLine.	menu add: 'command-key help' target: Utilities action: #openCommandKeyHelp.	menu balloonTextForLastItem: 'summary of keyboard shortcuts.'.	menu add: 'world menu help' target: self action: #worldMenuHelp.	menu balloonTextForLastItem: 'helps find menu items buried in submenus.'.	"menu add: 'info about flaps' target: Utilities action: #explainFlaps."	menu balloonTextForLastItem: 'describes how to enable and use flaps.'.	menu add: 'font size summary' target: Utilities action: #fontSizeSummary.	menu balloonTextForLastItem: 'summary of names and sizes of available fonts.'.	menu add: 'useful expressions' target: Utilities action: #openStandardWorkspace.	menu balloonTextForLastItem: 'a window full of useful expressions.'.	menu add: 'graphical imports' target: Smalltalk action: #viewImageImports.	menu balloonTextForLastItem: 'view the global repository called ImageImports; you can easily import external graphics into ImageImports via the FileList'.	menu add: 'standard graphics library' target: ScriptingSystem action: #inspectFormDictionary.	menu balloonTextForLastItem: 'lets you view and change the system''s standard library of graphics.'.	menu addLine.	menu addUpdating: #gridOnString action: #setGridding.	menu balloonTextForLastItem: 'turn gridding on or off.'.	menu add: 'set grid size...' action: #setGridSize.	menu balloonTextForLastItem: 'specify the size of the grid.'.	menu add: 'telemorphic...' action: #remoteDo.	menu balloonTextForLastItem: 'commands for doing multi-machine "telemorphic" experiments'.	menu addUpdating: #soundEnablingString target: Preferences action: #toggleSoundEnabling.	menu balloonTextForLastItem: 'turning sound off will completely disable Squeak''s use of sound.'.	menu add: 'definition for...' target: Utilities action: #lookUpDefinition.	menu balloonTextForLastItem: 'if connected to the internet, use this to look up the definition of an English word.'.	menu addLine.	menu add: 'set author initials...' target: screenCtrl action: #setAuthorInitials.	menu balloonTextForLastItem: 'supply initials to be used to identify the author of code and other content.'.	menu add: 'vm statistics' target: screenCtrl action: #vmStatistics.	menu balloonTextForLastItem: 'obtain some intriguing data about the vm.'.	menu add: 'space left' target: screenCtrl action: #garbageCollect.	menu balloonTextForLastItem: 'perform a full garbage-collection and report how many bytes of space remain in the image.'.	^ menu! !!MenuMorph methodsFor: 'control' stamp: 'sw 5/26/2000 06:59'!popUpNearHand	| aHand |	aHand _ self currentHand.	self popUpAt: aHand position forHand: aHand! !!ScreenController methodsFor: 'menu messages' stamp: 'sw 5/29/2000 00:26'!standardGraphicsLibrary	"Open a standard, throwaway window chock full of useful expressions.  1/17/96 sw"	ScriptingSystem inspectFormDictionary! !!ScreenController methodsFor: 'nested menus' stamp: 'sw 5/29/2000 00:25'!helpMenu 	"Answer the help menu to be put up as a screen submenu"	^ SelectionMenu labelList:		#(	'keep this menu up'			'about this system'			'update code from server'			'edit preferences...'			'command-key help'			'font size summary'			'useful expressions'			'view graphical imports'			'standard graphics library'),			(Array with: (Preferences soundsEnabled							ifFalse: ['turn sound on']							ifTrue: ['turn sound off'])) ,		#(	'definition for...'			'set author initials...'			'vm statistics'			'space left')		lines: #(1 4 6 11)		selections: #(durableHelpMenu aboutThisSystem absorbUpdatesFromServereditPreferences  openCommandKeyHelp fontSizeSummary openStandardWorkspace viewImageImportsstandardGraphicsLibrary soundOnOrOff  lookUpDefinition setAuthorInitials vmStatistics garbageCollect)"ScreenController new helpMenu startUp"! !!SystemDictionary methodsFor: 'miscellaneous' stamp: 'sw 5/26/2000 07:25'!viewImageImports	| imageImports |	"Open up a special Form inspector on the dictionary of graphical imports."	(imageImports _ self imageImports) size == 0 ifTrue:		[^ self inform: 'The ImageImports repository is currently empty,so there is nothing to view at this time.  You canuse a file list to import graphics from external filesinto ImageImports, and once you have done that,you will find this command more interesting.'].	imageImports inspectFormsWithLabel: 'Graphical Imports'! !