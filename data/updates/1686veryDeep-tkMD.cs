'From Squeak2.6 of 11 October 1999 [latest update: #1680] on 5 December 1999 at 6:04:12 pm'!"Change Set:		veryDeep-tkMDDate:			5 December 1999Author:			Ted KaehlerPut cleaner code into veryDeepCopy.Fixes my mistake in 1661.  Browser needs to share its systemOrganizer, classOrganizer, and metaClassOrganizer.  Define veryDeepInner: for Browser.  (Thanks to Steve Elkins and Scott Wallace.)"!!Object methodsFor: 'copying' stamp: 'tk 12/1/1999 18:40'!veryDeepCopy	"Do a complete tree copy using a dictionary.  An object in the tree twice is only copied once.  Both pointers point to one new copy."	| copier new refs newDep newModel |	copier _ DeepCopier new initialize: self initialDeepCopierSize.	new _ self veryDeepCopyWith: copier.	copier mapUniClasses.	copier references associationsDo: [:assoc | 		assoc value veryDeepFixupWith: copier].	"Fix dependents"	refs _ copier references.	DependentsFields associationsDo: [:pair |		pair value do: [:dep | 			(newDep _ refs at: dep ifAbsent: [nil]) ifNotNil: [				newModel _ refs at: pair key ifAbsent: [pair key].				newModel addDependent: newDep]]].	^ new! !!Browser methodsFor: 'copying' stamp: 'tk 12/5/1999 17:59'!veryDeepInner: deepCopier	"Copy all of my instance variables.  Some need to be not copied at all, but shared.  See DeepCopier class comment."super veryDeepInner: deepCopier."systemOrganizer _ systemOrganizer. 	clone has the old value. we share it""classOrganizer _ classOrganizer		clone has the old value. we share it""metaClassOrganizer 	_ metaClassOrganizer	clone has the old value. we share it"systemCategoryListIndex _ systemCategoryListIndex veryDeepCopyWith: deepCopier.classListIndex _ classListIndex veryDeepCopyWith: deepCopier.messageCategoryListIndex _ messageCategoryListIndex veryDeepCopyWith: deepCopier.messageListIndex _ messageListIndex veryDeepCopyWith: deepCopier.editSelection _ editSelection veryDeepCopyWith: deepCopier.metaClassIndicated _ metaClassIndicated veryDeepCopyWith: deepCopier.! !"Postscript:Delete a wrong fix."Browser removeSelector: #veryDeepFixupWith:.!