'From Squeak2.8alpha of 16 February 2000 [latest update: #2121] on 14 May 2000 at 4:54:01 pm'!"Change Set:		InfFormFix-arDate:			14 May 2000Author:			Andreas RaabA small fix for using InfiniteForms as 'color' of a Morph. IMPORTANT: The change set has been manually re-arranged to not break anything in the system." !!GrafPort methodsFor: 'drawing support' stamp: 'ar 5/14/2000 16:44'!fillRect: rect offset: aPoint	"The offset is really just for stupid InfiniteForms."	| fc |	fillPattern class == InfiniteForm ifTrue:[		fc _ halftoneForm.		self fillColor: nil.		fillPattern displayOnPort: ((self clippedBy: (rect translateBy: aPoint)) colorMap: nil) at: aPoint.		halftoneForm _ fc.		^self].	destX _ rect left.	destY _ rect top.	sourceX _ 0.	sourceY _ 0.	width _ rect width.	height _ rect height.	self copyBits.! !!FormCanvas methodsFor: 'drawing' stamp: 'ar 5/14/2000 15:50'!fillColor: c	"Note: This always fills, even if the color is transparent."	self setClearColor: c.	port fillRect: form boundingBox offset: origin.! !!FormCanvas methodsFor: 'drawing-rectangles' stamp: 'ar 5/14/2000 15:50'!frameAndFillRectangle: r fillColor: fillColor borderWidth: borderWidth borderColor: borderColor	| rect |	rect _ r translateBy: origin.	"draw the border of the rectangle"	borderColor isTransparent ifFalse:[		self setFillColor: borderColor.		(r area > 10000 or: [fillColor isTranslucent]) ifTrue: [			port frameRect: rect borderWidth: borderWidth.		] ifFalse: ["for small rectangles, it's faster to fill the entire outer rectangle					than to compute and fill the border rects"					port fillRect: rect offset: origin]].	"fill the inside"	fillColor isTransparent ifFalse:		[self setFillColor: fillColor.		port fillRect: (rect insetBy: borderWidth) offset: origin].! !GrafPort removeSelector: #fillRect:!