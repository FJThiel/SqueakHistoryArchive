'From Squeak2.9alpha of 13 June 2000 [latest update: #2411] on 18 June 2000 at 12:18:32 pm'!"Change Set:		152FFIDiscarding-smaDate:			18 June 2000Author:			Stefan Matthias AustFixed #discardFFI (at least for 2.8).  I also moved #externalCallFailed from Object to ExternalObject where it IMHO belongs to.PS: Instead of working around bugs	...	aClass isBehavior ifFalse:[^nil]. ""how could this happen?""	...one should find the cause ;-)"!!ExternalObject methodsFor: 'error handling' stamp: 'sma 6/18/2000 11:04'!externalCallFailed	"A call to an external function has failed."	^ ExternalFunction externalCallFailed! !!ExternalStructure class methodsFor: 'class management' stamp: 'sma 6/16/2000 22:12'!obsolete	"The receiver is becoming obsolete. 	NOTE: You if you remove the whole class category at once, you cannot	assume that the ExternalType class is still present."	Smalltalk at: #ExternalType ifPresent: [:class | class noticeRemovalOf: self].	^ super obsolete! !!ExternalType class methodsFor: 'class initialization' stamp: 'sma 6/18/2000 11:26'!obsolete	Smalltalk removeKey: #FFIConstants ifAbsent: [].	super obsolete! !!SystemDictionary methodsFor: 'shrinking' stamp: 'sma 6/18/2000 12:18'!discardFFI	"Discard the complete foreign function interface. Recreates	specialObjectsArray to prevent obsolete references"	SystemOrganization removeCategoriesMatching: 'FFI-*'.	Smalltalk removeClassNamed: #ExternalStructureInspector.	Smalltalk removeKey: #FFIConstants ifAbsent: [].	ByteArray removeSelector: #asExternalPointer.	ByteArray removeSelector: #pointerAt:.	Smalltalk recreateSpecialObjectsArray! !Object removeSelector: #externalCallFailed!