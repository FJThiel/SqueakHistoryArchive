'From Squeak2.6 of 13 October 1999 [latest update: #1723] on 17 December 1999 at 1:58:14 pm'!"Change Set:		FileStreamFixes-tprDate:			17 December 1999Author:			Tim Rowledge & Andreas RaabAn attempt to fix the use of relative path names in subclasses of FileStream."!!StandardFileStream class methodsFor: 'file creation' stamp: 'TPR 8/13/1999 21:22'!fileNamed: fileName	"Open a file with the given name for reading and writing. If the name has no directory part, then the file will be created in the default directory. If the file already exists, its prior contents may be modified or replaced, but the file will not be truncated on close."	^ self new open: (self fullName: fileName) forWrite: true! !!StandardFileStream class methodsFor: 'file creation' stamp: 'TPR 8/13/1999 21:21'!newFileNamed: fileName 	"Create a new file with the given name, and answer a stream opened for writing on that file. If the file already exists, ask the user what to do."	| dir localName choice newName fullName |	fullName _ self fullName: fileName.	(self isAFileNamed: fullName)		ifFalse: [^ self new open: fullName forWrite: true].	"file already exists:"	dir _ FileDirectory forFileName: fullName.	localName _ FileDirectory localNameFor: fullName.	choice _ (PopUpMenu		labels:'overwrite that filechoose another namecancel')		startUpWithCaption: localName, 'already exists.'.	choice = 1 ifTrue: [		dir deleteFileNamed: localName			ifAbsent: [self error: 'Could not delete the old version of that file'].		^ self new open: fullName forWrite: true].	choice = 2 ifTrue: [		newName _ FillInTheBlank request: 'Enter a new file name' initialAnswer: fullName.		fullName _ self fullName: newName.		^ self newFileNamed: fullName].	self error: 'Please close this to abort file opening'.! !!StandardFileStream class methodsFor: 'file creation' stamp: 'TPR 8/13/1999 21:26'!oldFileNamed: fileName	"Open an existing file with the given name for reading and writing. If the name has no directory part, then the file will be created in the default directory. If the file already exists, its prior contents may be modified or replaced, but the file will not be truncated on close."	| selection fullName newName |	fullName _ self fullName: fileName.	(self isAFileNamed: fullName) ifTrue:		[^ self new open: fullName forWrite: true].	"File does not exist..."	selection _ (PopUpMenu labels:'create a new filechoose another namecancel')			startUpWithCaption: (FileDirectory localNameFor: fullName) , 'does not exist.'.	selection = 1 ifTrue:		[^ self new open: fullName forWrite: true].	selection = 2 ifTrue:		[ newName _ FillInTheBlank request: 'Enter a new file name'						initialAnswer:  fullName.		^ self oldFileNamed:			(self fullName: newName)].	self halt! !!StandardFileStream class methodsFor: 'file creation' stamp: 'ar 12/17/1999 13:56'!readOnlyFileNamed: fileName 	"Open an existing file with the given name for reading."	"Changed to open a more usefull popup menu.  It now also includes the most likely choices.  jaf"	| selection dir files choices newName fullName |	fullName _ self fullName: fileName.	(self isAFileNamed: fullName)		ifTrue: [^ self new open: fullName forWrite: false].	"File does not exist..."	dir _ FileDirectory forFileName: fullName.	files _ dir fileNames.	choices _ (FileDirectory localNameFor: fullName) correctAgainst: files.	choices add: 'Choose another name'.	choices add: 'Cancel'.	selection _ (PopUpMenu labelArray: choices lines: (Array with: 5) )		startUpWithCaption: (FileDirectory localNameFor: fullName), 'does not exist.'.	selection < (choices size - 1) ifTrue: [		newName _ (dir pathName , FileDirectory slash , (choices at: selection))].	selection = (choices size - 1) ifTrue: [		newName _ FillInTheBlank 							request: 'Enter a new file name' 							initialAnswer: fileName].	newName = '' ifFalse: [^ self readOnlyFileNamed: (self fullName: newName)].	^ self error: 'Could not open a file'! !