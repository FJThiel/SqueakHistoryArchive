'From Squeak2.8alpha of 16 February 2000 [latest update: #1938] on 14 March 2000 at 11:25:57 pm'!"Change Set:		TurtleTrails-arDate:			14 March 2000Author:			Andreas RaabFixes strange turtle trails when moving a playfield around"!!PasteUpMorph methodsFor: 'pen' stamp: 'ar 3/14/2000 23:23'!drawPenTrailFor: aMorph from: oldPoint to: targetPoint	"Draw a pen trail for aMorph, using its pen state (the pen is assumed to be down)."	"The turtleTrailsForm is created on demand when the first pen is put down and removed (to save space) when turtle trails are cleared."	| origin mPenSize offset turtleTrailsDelta newPoint |	turtleTrailsDelta _ self valueOfProperty: #turtleTrailsDelta ifAbsent:[0@0].	newPoint _ targetPoint - turtleTrailsDelta.	oldPoint = newPoint ifTrue:[^self].	self createOrResizeTrailsForm.	origin _ self topLeft.	mPenSize _ aMorph getPenSize.	turtlePen sourceForm width ~= mPenSize		ifTrue: [turtlePen squareNib: mPenSize].	offset _ (mPenSize // 2)@(mPenSize // 2).	turtlePen color: aMorph getPenColor.	turtlePen drawFrom: (oldPoint - origin - offset) asIntegerPoint				to: (newPoint - origin - offset) asIntegerPoint.	self invalidRect: ((oldPoint rect: newPoint) expandBy: mPenSize)! !!PasteUpMorph methodsFor: 'private' stamp: 'ar 3/14/2000 23:20'!privateFullMoveBy: delta	"Private. Overridden to prevent drawing turtle trails when a playfield is moved"	self setProperty: #turtleTrailsDelta toValue: delta.	super privateFullMoveBy: delta.	self removeProperty: #turtleTrailsDelta.! !