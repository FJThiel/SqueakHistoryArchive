'From Squeak3.7alpha of ''11 September 2003'' [latest update: #5423] on 5 October 2003 at 8:28:40 pm'!"Change Set:		TextDeprecationFixV2Date:			1 October 2003Author:			Daniel VainsencherUpgrade users of the deprecated rangeOf:startingAt:forStyle: to the preferred rangeOf:startingAt:md: removed Tests. "!!Paragraph methodsFor: 'selecting' stamp: 'dvf 10/1/2003 13:28'!clickAt: clickPoint for: model controller: aController	"Give sensitive text a chance to fire.  Display flash: (100@100 extent: 100@100)."	| startBlock action range box boxes |	action _ false.	startBlock _ self characterBlockAtPoint: clickPoint.	(text attributesAt: startBlock stringIndex forStyle: textStyle) 		do: [:att | att mayActOnClick ifTrue:				[range _ text rangeOf: att startingAt: startBlock stringIndex.				boxes _ self selectionRectsFrom: (self characterBlockForIndex: range first) 							to: (self characterBlockForIndex: range last+1).				box _ boxes detect: [:each | each containsPoint: clickPoint]							ifNone: [^ action].				Utilities awaitMouseUpIn: box repeating: []					ifSucceed: [aController terminateAndInitializeAround:								[(att actOnClickFor: model in: self at: clickPoint editor: aController) ifTrue: [action _ true]]]]].	^ action! !!TextPrintIt methodsFor: 'as yet unclassified' stamp: 'dvf 10/1/2003 13:27'!actOnClickFor: anObject in: aParagraph at: clickPoint editor: editor	"Note: evalString gets evaluated IN THE CONTEXT OF anObject	 -- meaning that self and all instVars are accessible"	| result range index |	result _ Compiler evaluate: evalString for: anObject logged: false.	result _ ' ', result printString,' '.	"figure out where the attribute ends in aParagraph"	index _ (aParagraph characterBlockAtPoint: clickPoint) stringIndex.	range _ aParagraph text rangeOf: self startingAt: index.	editor selectFrom: range last+1 to: range last.	editor zapSelectionWith: result.	editor selectFrom: range last to: range last + result size.	^ true ! !