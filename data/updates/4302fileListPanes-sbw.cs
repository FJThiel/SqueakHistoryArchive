'From Squeak3.1alpha of 7 March 2001 [latest update: #4282] on 30 August 2001 at 9:19 am'!"Change Set:		fileListPanes-sbwDate:			29 August 2001Author:			Stephan B. WesselsThe button bar pane and pattern pane now have fixed heights in FileList.  This is a revisionto an earlier change set.  The changes here now account for those published inupdate #4266"!!FileList class methodsFor: 'instance creation' stamp: 'sbw 8/29/2001 19:36'!addButtonsAndFileListPanesTo: window at: upperFraction plus: offset forFileList: aFileList 	| fileListMorph row buttonHeight fileListTop divider dividerDelta buttons |	fileListMorph _ PluggableListMorph				on: aFileList				list: #fileList				selected: #fileListIndex				changeSelected: #fileListIndex:				menu: #fileListMenu:.	aFileList wantsOptionalButtons		ifTrue: [buttons _ aFileList optionalButtonRow.			divider _ BorderedSubpaneDividerMorph forBottomEdge.			dividerDelta _ 0.			Preferences alternativeWindowLook				ifTrue: [buttons color: Color transparent.					buttons						submorphsDo: [:m | m borderWidth: 2;								 borderColor: #raised].divider extent: 4 @ 4;						 color: Color transparent;						 borderColor: #raised;						 borderWidth: 2.					fileListMorph borderColor: Color transparent.					dividerDelta _ 3].			row _ AlignmentMorph newColumn hResizing: #spaceFill;						 vResizing: #spaceFill;						 layoutInset: 0;						 borderWidth: 2;						 layoutPolicy: ProportionalLayout new.			buttonHeight _ self defaultButtonPaneHeight.			row				addMorph: buttons				fullFrame: (LayoutFrame						fractions: (0 @ 0 corner: 1 @ 0)						offsets: (0 @ 0 corner: 0 @ buttonHeight)).			row				addMorph: divider				fullFrame: (LayoutFrame						fractions: (0 @ 0 corner: 1 @ 0)						offsets: (0 @ buttonHeight corner: 0 @ buttonHeight + dividerDelta)).			row				addMorph: fileListMorph				fullFrame: (LayoutFrame						fractions: (0 @ 0 corner: 1 @ 1)						offsets: (0 @ buttonHeight + dividerDelta corner: 0 @ 0)).			window				addMorph: row				fullFrame: (LayoutFrame						fractions: upperFraction						offsets: (0 @ offset corner: 0 @ 0)).			Preferences alternativeWindowLook				ifTrue: [row borderWidth: 2]				ifFalse: [row borderWidth: 0]]		ifFalse: [fileListTop _ 0.			window				addMorph: fileListMorph				frame: (0.3 @ fileListTop corner: 1 @ 0.3)]! !!FileList class methodsFor: 'instance creation' stamp: 'sbw 8/21/2001 12:56'!addVolumesAndPatternPanesTo: window at: upperFraction plus: offset forFileList: aFileList 	| row patternHeight volumeListMorph patternMorph divider dividerDelta |	row _ AlignmentMorph newColumn hResizing: #spaceFill;				 vResizing: #spaceFill;				 layoutInset: 0;				 borderWidth: 0;				 layoutPolicy: ProportionalLayout new.	patternHeight _ 25.	volumeListMorph _ (PluggableListMorph				on: aFileList				list: #volumeList				selected: #volumeListIndex				changeSelected: #volumeListIndex:				menu: #volumeMenu:)				autoDeselect: false.	patternMorph _ PluggableTextMorph				on: aFileList				text: #pattern				accept: #pattern:.	divider _ BorderedSubpaneDividerMorph horizontal.	dividerDelta _ 0.	Preferences alternativeWindowLook		ifTrue: [divider extent: 4 @ 4;				 color: Color transparent;				 borderColor: #raised;				 borderWidth: 2.			volumeListMorph borderColor: Color transparent.			patternMorph borderColor: Color transparent.			dividerDelta _ 3].	row		addMorph: (volumeListMorph autoDeselect: false)		fullFrame: (LayoutFrame				fractions: (0 @ 0 corner: 1 @ 1)				offsets: (0 @ 0 corner: 0 @ patternHeight negated - dividerDelta)).	row		addMorph: divider		fullFrame: (LayoutFrame				fractions: (0 @ 1 corner: 1 @ 1)				offsets: (0 @ patternHeight negated - dividerDelta corner: 0 @ patternHeight negated)).	row		addMorph: patternMorph		fullFrame: (LayoutFrame				fractions: (0 @ 1 corner: 1 @ 1)				offsets: (0 @ patternHeight negated corner: 0 @ 0)).	window		addMorph: row		fullFrame: (LayoutFrame				fractions: upperFraction				offsets: (0 @ offset corner: 0 @ 0)).	Preferences alternativeWindowLook		ifTrue: [row borderWidth: 2] ifFalse: [row borderWidth: 0]! !!FileList class methodsFor: 'instance creation' stamp: 'sbw 8/21/2001 11:48'!defaultButtonPaneHeight	"Answer the user's preferred default height for new button panes."	^ Preferences		parameterAt: #defaultButtonPaneHeight		default: [25]! !!FileList class methodsFor: 'instance creation' stamp: 'sbw 8/29/2001 19:37'!openAsMorph	"Open a morphic view of a FileList on the default directory."	| dir aFileList window upperFraction offset |	dir _ FileDirectory default.	aFileList _ self new directory: dir.	window _ (SystemWindow labelled: dir pathName)				model: aFileList.	upperFraction _ 0.3.	offset _ 0.	self		addVolumesAndPatternPanesTo: window		at: (0 @ 0 corner: 0.3 @ upperFraction)		plus: offset		forFileList: aFileList.	self		addButtonsAndFileListPanesTo: window		at: (0.3 @ 0 corner: 1.0 @ upperFraction)		plus: offset		forFileList: aFileList.	window		addMorph: (PluggableTextMorph				on: aFileList				text: #contents				accept: #put:				readSelection: #contentsSelection				menu: #fileContentsMenu:shifted:)		frame: (0 @ 0.3 corner: 1 @ 1).	^ window! !