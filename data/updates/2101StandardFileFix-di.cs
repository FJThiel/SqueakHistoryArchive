'From Squeak2.8alpha of 12 January 2000 [latest update: #2098] on 12 May 2000 at 12:29:47 pm'!"Change Set:		StandardFileFixDate:			12 May 2000Author:			Dan IngallsWhen you give a pattern like *.txt to the StandardFileMenu, it used to restrict subdirectory names as well as files.This change set lets you see all subdirectories even when filtering with a pattern."!!StandardFileMenu methodsFor: 'menu building' stamp: 'di 5/12/2000 10:31'!directoryNamesString: aDirectory"Answer a string concatenating the directory name strings in aDirectory, each string followed by a '[...]' indicator, and followed by a cr."	^ String streamContents:		[:s | aDirectory directoryNames do: 				[:dn | s nextPutAll: dn withBlanksTrimmed , ' [...]'; cr]]! !!StandardFileMenu methodsFor: 'menu building' stamp: 'di 5/12/2000 11:01'!menuSelectionsArray: aDirectory"Answer a menu selections object corresponding to aDirectory.  The object is an array corresponding to each item, each element itself constituting a two-element array, the first element of which contains a selector to operate on and the second element of which contains the parameters for that selector."	|dirSize|	dirSize _ aDirectory pathParts size.	^Array streamContents: [:s |		canTypeFileName ifTrue:			[s nextPut: (StandardFileMenuResult				directory: aDirectory				name: nil)].		s nextPut: (StandardFileMenuResult			directory: (FileDirectory root)			name: '').		aDirectory pathParts doWithIndex: 			[:d :i | s nextPut: (StandardFileMenuResult					directory: (self 						advance: dirSize - i						containingDirectoriesFrom: aDirectory)					name: '')].		aDirectory directoryNames do: 			[:dn |  s nextPut: (StandardFileMenuResult						directory: (FileDirectory on: (aDirectory fullNameFor: dn))						name: '')].		aDirectory fileNames do: 			[:fn | (pattern match: fn) ifTrue: [					s nextPut: (StandardFileMenuResult						directory: aDirectory						name: fn)]]]! !