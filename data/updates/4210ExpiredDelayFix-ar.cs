'From Squeak3.1alpha of 28 February 2001 [latest update: #4207] on 20 July 2001 at 2:02:20 pm'!"Change Set:		ExpiredDelayFix-arDate:			20 July 2001Author:			Andreas RaabA fix for activating delays which are already expired."!!Delay methodsFor: 'private' stamp: 'ar 7/18/2001 20:28'!activate	"Private!! Make the receiver the Delay to be awoken when the next timer interrupt occurs. This method should only be called from a block protected by the AccessProtect semaphore."	ActiveDelay _ self.	ActiveDelayStartTime _ Time millisecondClockValue.	ActiveDelayStartTime > resumptionTime ifTrue:[		ActiveDelay signalWaitingProcess.		SuspendedDelays isEmpty ifTrue:[			ActiveDelay _ nil.			ActiveDelayStartTime _ nil.		] ifFalse:[SuspendedDelays removeFirst activate].	] ifFalse:[		TimingSemaphore initSignals.		Delay primSignal: TimingSemaphore atMilliseconds: resumptionTime.	].! !