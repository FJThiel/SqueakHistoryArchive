'From Squeakland 3.8.5976 of 25 August 2004 [latest update: #377] on 17 December 2004 at 2:23:41 pm'!"Change Set:		defaultDir-takDate:			17 December 2004Author:			Takashi YamamiyaThe argument of FileDirectory class >> setDefaultDirectory should be encoded text.A platform dependent string causes crash at start up."!!FileDirectory class methodsFor: 'system start up' stamp: 'tak 12/17/2004 14:03'!setDefaultDirectory: directoryName	"Initialize the default directory to the directory supplied. This method is called when the image starts up."	| dirName |	DirectoryClass _ self activeDirectoryClass.	dirName _ (FilePath pathName: directoryName) asSqueakPathName.	[dirName endsWith: self slash] whileTrue:[		dirName _ dirName copyFrom: 1 to: dirName size - self slash size.	].	DefaultDirectory _ self on: dirName.! !!SecurityManager methodsFor: 'accessing' stamp: 'tak 12/17/2004 14:19'!untrustedUserDirectory	"SecurityManager default untrustedUserDirectory"	| dir |	dir := self primUntrustedUserDirectory.	^ dir		ifNil: [FileDirectory default pathName]		ifNotNil: [(FilePath pathName: dir isEncoded: true) asSqueakPathName]! !!SecurityManager methodsFor: 'private' stamp: 'tak 12/17/2004 14:15'!primUntrustedUserDirectory	"Primitive. Return the untrusted user directory that is the root directory for files that are visible even in restricted mode."	<primitive: 'primitiveGetUntrustedUserDirectory' module: 'SecurityPlugin'>	^ nil! !