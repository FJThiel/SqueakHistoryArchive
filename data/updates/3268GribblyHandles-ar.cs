'From Squeak2.9alpha of 13 June 2000 [latest update: #3333] on 30 January 2001 at 11:34:21 pm'!"Change Set:		GribblyHandles-arDate:			30 January 2001Author:			Andreas RaabFixes the gribblies being left by the blue rotate handle. Also fixes a very recent issue when rotating morphs and introduces two not very important but certainly convenient conversion of float rects to int rects."!!FormCanvas methodsFor: 'drawing-ovals' stamp: 'ar 1/30/2001 23:10'!fillOval: r color: fillColor borderWidth: borderWidth borderColor: borderColor	| rect |	"draw the border of the oval"	rect _ (r translateBy: origin) truncated.	borderColor isTransparent ifFalse:[		self setFillColor: borderColor.		(r area > 10000 or: [fillColor isTranslucent]) 			ifTrue: [port frameOval: rect borderWidth: borderWidth]			ifFalse: [port fillOval: rect]]. "faster this way"	"fill the inside"	fillColor isTransparent ifFalse:		[self setFillColor: fillColor.		port fillOval: (rect insetBy: borderWidth)].! !!HaloMorph methodsFor: 'handles' stamp: 'ar 1/30/2001 23:32'!positionIn: aBox horizontalPlacement: horiz verticalPlacement: vert	| xCoord yCoord |	horiz == #left		ifTrue:	[xCoord _ aBox left].	horiz == #leftCenter		ifTrue:	[xCoord _ aBox left + (aBox width // 4)].	horiz == #center		ifTrue:	[xCoord _ (aBox left + aBox right) // 2].	horiz == #rightCenter		ifTrue:	[xCoord _ aBox left + ((3 * aBox width) // 4)].	horiz == #right		ifTrue:	[xCoord _ aBox right].	vert == #top		ifTrue:	[yCoord _ aBox top].	vert == #topCenter		ifTrue:	[yCoord _ aBox top + (aBox height // 4)].	vert == #center		ifTrue:	[yCoord _ (aBox top + aBox bottom) // 2].	vert == #bottomCenter		ifTrue:	[yCoord _ aBox top + ((3 * aBox height) // 4)].	vert == #bottom		ifTrue:	[yCoord _ aBox bottom].	^ xCoord asInteger @ yCoord asInteger! !!TransformMorph methodsFor: 'accessing' stamp: 'ar 1/30/2001 23:20'!angle: newAngle	self changed.	transform _ transform withAngle: newAngle.	self layoutChanged.	self changed! !!WorldState methodsFor: 'canvas' stamp: 'ar 1/30/2001 23:25'!recordDamagedRect: damageRect	damageRecorder ifNotNil: [damageRecorder recordInvalidRect: damageRect truncated]! !