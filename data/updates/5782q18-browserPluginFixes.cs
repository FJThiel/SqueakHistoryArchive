'From Squeak3.7alpha of 11 September 2003 [latest update: #5764] on 5 March 2004 at 8:46:14 pm'!"Change Set:		q18-browserPluginFixesDate:			5 March 2004Author:			Michael RuegerAdds a workaround for those browser plugins (like Safari) for which the determineRunningInBrowser is broken.Adapted from 0174browserPluginFixes"!!AutoStart class methodsFor: 'class initialization' stamp: 'mir 3/5/2004 20:46'!startUp: resuming	"The image is either being newly started (resuming is true), or it's just been snapshotted.	If this has just been a snapshot, skip all the startup stuff."	| startupParameters launchers |	resuming ifFalse: [ ^self ].	HTTPClient determineIfRunningInBrowser.	startupParameters _ AbstractLauncher extractParameters.	(startupParameters includesKey: 'apiSupported' asUppercase )		ifTrue: [			HTTPClient browserSupportsAPI: ((startupParameters at: 'apiSupported' asUppercase) asUppercase = 'TRUE').			HTTPClient isRunningInBrowser				ifFalse: [HTTPClient isRunningInBrowser: true]].	self checkForUpdates		ifTrue: [^self].	self checkForPluginUpdate.	launchers _ self installedLaunchers collect: [:launcher |		launcher new].	launchers do: [:launcher |		launcher parameters: startupParameters].	launchers do: [:launcher |		Smalltalk at: #WorldState ifPresent: [ :ws | ws addDeferredUIMessage: [launcher startUp]]]! !!AutoStart class methodsFor: 'updating' stamp: 'mir 3/5/2004 20:43'!checkForPluginUpdate	| pluginVersion updateURL |	World 		ifNotNil: [			World install.			ActiveHand position: 100@100].	HTTPClient isRunningInBrowser		ifFalse: [^false].	pluginVersion _ AbstractLauncher extractParameters		at: (SmalltalkImage current platformName copyWithout: Character space) asUppercase		ifAbsent: [^false].	updateURL _ AbstractLauncher extractParameters		at: 'UPDATE_URL'		ifAbsent: [^false].	^SystemVersion check: pluginVersion andRequestPluginUpdate: updateURL! !!AutoStart class methodsFor: 'updating' stamp: 'mir 11/13/2003 19:09'!checkForUpdates	| availableUpdate updateServer |	World 		ifNotNil: [			World install.			ActiveHand position: 100@100].	HTTPClient isRunningInBrowser		ifFalse: [^self processUpdates].	availableUpdate _ (AbstractLauncher extractParameters		at: 'UPDATE'		ifAbsent: [''] ) asInteger.	availableUpdate		ifNil: [^false].	updateServer _ AbstractLauncher extractParameters		at: 'UPDATESERVER'		ifAbsent: [AbstractLauncher extractParameters		at: 'UPDATE_SERVER'		ifAbsent: ['Squeakland']].	Utilities setUpdateServer: updateServer.	^SystemVersion checkAndApplyUpdates: availableUpdate! !!ProjectLauncher methodsFor: 'running' stamp: 'mir 8/4/2003 13:43'!startUp	World ifNotNil: [World install].	Utilities authorName: nil.	Preferences eToyLoginEnabled		ifFalse:[^self startUpAfterLogin].	self doEtoyLogin.! !