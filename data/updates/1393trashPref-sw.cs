'From Squeak 2.5 of August 6, 1999 on 18 August 1999 at 7:58:56 pm'!"Change Set:		trashPref-swDate:			18 August 1999Author:			Scott WallaceMakes the automatic saving of trashed items optional, depending on the new Preference named 'preserveTrash'"!!Preferences class methodsFor: 'help' stamp: 'sw 8/18/1999 19:52'!initHelpMsgsC	"Automatically called whenever you call   	Preferences initializeHelpMessages		or	Preferences callHelpMessageInitializersby virtue of its being in the 'help' category of Preferences class"	#(	(allowMVCprojects			'If true, the open... menu will offer you the chance to open an mvc project.')		(autoAccessors			'If true, an attempt to call a message which is not understood by an object but whose selector is the same as an inst var of the object will result in automatic compilation of an accessor method for that object''s class')		(compressFlashImages			'If true, flash images will automatically be reduced to 8-bit color depth upon being read')		(conversionMethodsAtFileOut			'Governs whether at fileout time you should be prompted to define conversion methods where deemed appropriate.')		(extractFlashInHighQuality			'Whether flash graphics should be extracted in high quality.')		(extractFlashInHighestQuality			'Whether flash graphics should be extracted in highest possible quality.')		(preserveTrash			'Whether morphs dismissed via halo or dragged into the Trash should be preserved in the TrashCan for possible future retrieval.  If false, they are not preserved.')			) do:		[:pair | HelpDictionary at: pair first put: 			(pair first, ':', pair last)]! !!Preferences class methodsFor: 'initial values' stamp: 'sw 8/18/1999 19:53'!initialValuesA	"Another lot of initial values for prefs.  Simply placing methods of this sort here will assure that the initial values provided are ascribed to the preference when prefs are initialized"	^#(	(conversionMethodsAtFileOut			false)		(menuColorFromWorld				false)		(viewersInFlaps						true)		(oneViewerFlapAtATime				true)		(optionalMorphicButtons				false)		(preserveTrash						true))! !!TrashCanMorph methodsFor: 'dropping' stamp: 'sw 8/18/1999 19:54'!acceptDroppingMorph: aMorph event: evt	Preferences soundsEnabled ifTrue:		[Preferences preserveTrash 			ifFalse:				[self playSoundNamed: 'scratch']			ifTrue:				[self class playDeleteSound]].	evt hand endDisplaySuppression.	self state: #off.	aMorph delete.	aMorph == Utilities scrapsBook ifFalse:		[Utilities addToTrash: aMorph]! !!TrashCanMorph class methodsFor: 'miscellaneous' stamp: 'sw 8/18/1999 19:55'!moveToTrash: aMorph	Preferences soundsEnabled ifTrue:		[Preferences preserveTrash 			ifFalse:				[self playSoundNamed: 'scratch']			ifTrue:				[self playDeleteSound]].	aMorph delete.	aMorph == Utilities scrapsBook ifFalse:		[Utilities addToTrash: aMorph]! !!Utilities class methodsFor: 'scraps' stamp: 'sw 8/18/1999 19:56'!addToTrash: aMorph	"Paste the object onto a page of the system Trash book, unless the preference is set to empty the trash immediately."	| aBook aPage |	Preferences preserveTrash ifFalse: [^ self].	aBook _ self scrapsBook.	aMorph position: aBook pages first position + (0@40).	aBook pages do: [:pp | 		(pp submorphs size = 1 and: [pp hasProperty: #trash]) ifTrue:  "perhaps remove that property here"			["page is blank"			^ pp addMorph: aMorph]].	aPage _ aBook insertPageLabel: Time dateAndTimeNow printString		morphs: (Array with: aMorph).	aPage setProperty: #trash toValue: true! !!Utilities class methodsFor: 'scraps' stamp: 'sw 8/18/1999 19:57'!scrapsBook	| header aButton label |	ScrapsBook ifNil:		[ScrapsBook _ BookMorph new pageSize: 200@300; setNameTo: 'scraps'.		ScrapsBook color: Color yellow muchLighter.		ScrapsBook borderColor: Color darkGray; borderWidth: 2.		ScrapsBook removeEverything; showPageControls; insertPage.		header _ AlignmentMorph newRow centering: #center.		header setProperty: #header toValue: true.		header addMorph: (aButton _ SimpleButtonMorph new label: 'X' font: ScriptingSystem fontForScriptorButtons).		aButton target: ScrapsBook; color:  Color lightRed; actionSelector: #delete;				setBalloonText: 'Remove(to view again later, click on any trashcan).'.		header addMorphBack: AlignmentMorph newVariableTransparentSpacer beSticky.		header addMorphBack: 	(label _ UpdatingStringMorph new target: self) beSticky.		label getSelector: #trashTitle; useStringFormat; step.		header addMorphBack: AlignmentMorph newVariableTransparentSpacer beSticky.		header addMorphBack: (aButton _ SimpleButtonMorph new label: 'E' font: ScriptingSystem fontForScriptorButtons).		aButton target: Utilities; color:  Color veryLightGray; actionSelector: #maybeEmptyTrash;				setBalloonText: 'Click here to empty the trash.'.		ScrapsBook currentPage addMorph: (TextMorph new contents: 'Objects you drag into the trash will automatically be saved here, one object per page, in case you need them later.  To disable this feature set the "preserveTrash" Preference to false.You can individually expunge objects by hitting the - control, and you can empty out all the objects in the trash can by hitting the "E" button at top right.'			wrappedTo: 190).		ScrapsBook addMorphFront: header.		ScrapsBook setProperty: #scraps toValue: true].	^ ScrapsBook	"Utilities emptyScrapsBook"! !"Postscript:"Preferences initializeAddedPreferences.Preferences callHelpMessageInitializers.!