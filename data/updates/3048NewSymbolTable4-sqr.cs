'From Squeak2.9alpha of 13 June 2000 [latest update: #2915] on 12 November 2000 at 5:47:37 pm'!"Change Set:		242NewSymbolTable4-sqrDate:			24 August 2000Author:			Andres ValloudInstall new symbol table"!Symbol class	instanceVariableNames: ''!!Symbol class methodsFor: 'instance creation' stamp: 'SqR 8/23/2000 16:22'!intern: aStringOrSymbol	^(SymbolTable like: aStringOrSymbol)		ifNil:			[				SymbolTable add:					((aStringOrSymbol isKindOf: Symbol)						ifTrue: [aStringOrSymbol]						ifFalse: [(self new: aStringOrSymbol size) string: aStringOrSymbol])			]! !!Symbol class methodsFor: 'private' stamp: 'SqR 8/23/2000 16:33'!fastRehash		"Symbol fastRehash"	"Rebuild the hash table, reclaiming unreferenced Symbols"	| oldSize |	oldSize _ SymbolTable size.	Smalltalk garbageCollect.	self rehash.	^(oldSize - SymbolTable size) printString, ' symbols reclaimed'! !!Symbol class methodsFor: 'private' stamp: 'SqR 8/23/2000 16:30'!hasInterned: aString ifTrue: symBlock 	"Answer with false if aString hasnt been interned (into a Symbol), 	otherwise supply the symbol to symBlock and return true."	| symbol |	^(symbol _ SymbolTable like: aString)		ifNil: [false]		ifNotNil: [symBlock value: symbol. true]! !!Symbol class methodsFor: 'private' stamp: 'SqR 8/23/2000 16:32'!rehash		"Symbol rehash"	"Rebuild the hash table, reclaiming unreferenced Symbols."	SymbolTable _ SymbolTable class withAll: self allInstances! !!Symbol class methodsFor: 'private' stamp: 'SqR 8/23/2000 16:27'!slowRehash		"Symbol slowRehash"	"Rebuild the hash table, reclaiming unreferenced Symbols."	^self fastRehash! !!Symbol class methodsFor: 'private' stamp: 'SqR 8/23/2000 16:31'!useArrayTables	"Symbol useArrayTables"	"Use a non weak set for referencing the symbols"	SymbolTable _ Set withAll: self allInstances! !!Symbol class methodsFor: 'private' stamp: 'SqR 8/23/2000 16:31'!useWeakArrayTables "Symbol useWeakArrayTables"	"Use a weak set for referencing the symbols"	self initialize! !Symbol class removeSelector: #internCharacter:!Symbol class removeSelector: #newIntern:!