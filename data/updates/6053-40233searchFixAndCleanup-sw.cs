'From Squeakland 3.2.4913 of 10 July 2002 [latest update: #230] on 10 August 2004 at 12:24:47 pm'!"Change Set:		searchFixAndCleanup-swDate:			10 August 2004Author:			Scott WallaceFixes a bug in phrase-construction in the search pane of a viewer.  Takes the opportunity to consolidate two very similar methods whose divergence had resulted in the bug in the first place."!!Object methodsFor: 'viewer' stamp: 'sw 8/10/2004 11:53'!tilePhrasesForCategory: aCategorySymbol inViewer: aViewer	"Return a collection of phrases for the category."	| interfaces |	interfaces _ self methodInterfacesForCategory: aCategorySymbol inVocabulary: aViewer currentVocabulary limitClass: aViewer limitClass.	interfaces _ self methodInterfacesInPresentationOrderFrom: interfaces forCategory: aCategorySymbol.	^ self tilePhrasesForMethodInterfaces: interfaces inViewer: aViewer! !!Object methodsFor: 'viewer' stamp: 'sw 8/10/2004 11:53'!tilePhrasesForMethodInterfaces: methodInterfaceList inViewer: aViewer	"Return a collection of ViewerLine objects corresponding to the method-interface list provided.   The resulting list will be in the same order as the incoming list, but may be smaller if the viewer's vocbulary suppresses some of the methods, or if, in classic tiles mode, the selector requires more arguments than can be handled."	| toSuppress interfaces resultType itsSelector |	toSuppress _ aViewer currentVocabulary phraseSymbolsToSuppress.	interfaces _ methodInterfaceList reject: [:int | toSuppress includes: int selector].	Preferences universalTiles ifFalse:  "Classic tiles have their limitations..."		[interfaces _ interfaces select:			[:int |				itsSelector _ int selector.				itsSelector numArgs < 2 or:					"The lone two-arg loophole in classic tiles"					[#(color:sees:) includes: itsSelector]]].	^ interfaces collect:		[:aMethodInterface |			((resultType _ aMethodInterface resultType) notNil and: [resultType ~~ #unknown]) 				ifTrue:					[aViewer phraseForVariableFrom: aMethodInterface]				ifFalse:					[aViewer phraseForCommandFrom: aMethodInterface]]! !!Object methodsFor: 'viewer' stamp: 'sw 8/10/2004 12:23'!tilePhrasesForSelectorList: aList inViewer: aViewer	"Particular to the search facility in viewers.  Answer a list, in appropriate order, of ViewerLine objects to put into the viewer."	| interfaces aVocab |	aVocab _ aViewer currentVocabulary.	interfaces _ self		methodInterfacesInPresentationOrderFrom:			(aList collect: [:aSel | aVocab methodInterfaceForSelector: aSel class: self class])		forCategory: #search.	^ self tilePhrasesForMethodInterfaces: interfaces inViewer: aViewer! !