'From Squeak2.9alpha of 13 June 2000 [latest update: #2823] on 7 October 2000 at 6:52:02 pm'!"Change Set:		HaloTweaks-arDate:			7 October 2000Author:			Andreas RaabHalo tweaks - reverts halo direction and excludes playfields from obtaining the halo automatically unless either it's been clicked on directly or used in an 'inside-out' transition."!!Morph methodsFor: 'halos and balloon help' stamp: 'ar 10/7/2000 18:48'!transferHalo: event from: formerHaloOwner	"Progressively transfer the halo to the next likely recipient"	| localEvt w |	(self isWorldMorph and:[owner isNil]) ifFalse:[		(self wantsHaloFromClick and:[formerHaloOwner ~~ self]) 			ifTrue:[^self addHalo: event from: formerHaloOwner]].	event shiftPressed ifTrue:[		"Pass it outwards"		owner ifNotNil:[^owner transferHalo: event from: formerHaloOwner].		"We're at the top level; throw the event back in to find recipient"		formerHaloOwner removeHalo.		^self processEvent: event copy resetHandlerFields.	].	self submorphsDo:[:m|		localEvt _ event transformedBy: (m transformedFrom: self).		(m fullContainsPoint: localEvt position) 			ifTrue:[^m transferHalo: event from: formerHaloOwner].	].	"We're at the bottom most level; throw the event back up to the root to find recipient"	formerHaloOwner removeHalo.	w _ self world.	localEvt _ event transformedBy: (self transformedFrom: w) inverseTransformation.	^w processEvent: localEvt resetHandlerFields.! !!Morph methodsFor: 'meta-actions' stamp: 'ar 10/7/2000 18:44'!handlerForBlueButtonDown: anEvent	"Return the (prospective) handler for a mouse down event. The handler is temporarily installed and can be used for morphs further down the hierarchy to negotiate whether the inner or the outer morph should finally handle the event.	Note: Halos handle blue button events themselves so we will only be asked if there is currently no halo on top of us."	self wantsHaloFromClick ifFalse:[^nil].	anEvent handler ifNil:[^self].	anEvent handler isPlayfieldLike ifTrue:[^self]. "by default exclude playfields"	(anEvent shiftPressed)		ifFalse:[^nil] "let outer guy have it"		ifTrue:[^self] "let me have it"! !