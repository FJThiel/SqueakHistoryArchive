'From Squeak3.8beta of ''22 October 2004'' [latest update: #6351] on 27 October 2004 at 6:04:39 pm'!"Change Set:		InternetConfigurationDate:			11 October 2004Author:			Marcus Denkerv3: adds a preference.v2: this one works..For Mac: Sets the Proxy automatically on image startup. Uses the InternetConfigurationPlugin that is part of the Mac VM for some time allready. The InternetConfiguration classwas part of the original posting, but never got added to the image.This just takes John's InternetConfiguration class and hooks it into system startupt toset the http proxy. Not tested on non-mac. Should do nothing there."!Object subclass: #InternetConfiguration	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Network-Kernel'!!InternetConfiguration class methodsFor: 'initialize-release' stamp: 'md 10/27/2004 17:59'!initialize	"self initialize"	Preferences		addPreference: #enableInternetConfig		category: #general		default: false		balloonHelp: 'If true, set http proxy automatically on startUp. Only works on MacOS X for now'.	Smalltalk addToStartUpList: self.	Smalltalk addToShutDownList: self.! !!InternetConfiguration class methodsFor: 'system startup' stamp: 'md 10/27/2004 18:00'!shutDown	Preferences enableInternetConfig ifTrue: [		(SmalltalkImage current platformName =  'Mac OS') ifTrue: [	  		HTTPSocket stopUsingProxyServer.		]	]. ! !!InternetConfiguration class methodsFor: 'system startup' stamp: 'md 10/27/2004 18:00'!startUp		Preferences enableInternetConfig ifTrue: [		(SmalltalkImage current platformName =  'Mac OS') ifTrue: [			 (self getHTTPProxyHost findTokens: ':') ifNotEmpty: [:p |			 	HTTPSocket useProxyServerNamed: p first port: p second asInteger		 	]		]	]! !!InternetConfiguration class methodsFor: 'tests' stamp: 'JMM 10/5/2001 11:23'!useFTPProxy	"Return true if UseFTPProxy"	"InternetConfiguration useFTPProxy"	^(self primitiveGetStringKeyedBy: 'UseFTPProxy') = '1'! !!InternetConfiguration class methodsFor: 'tests' stamp: 'JMM 10/5/2001 11:23'!useGopherProxy	"Return true if UseGopherProxy"	"InternetConfiguration useGopherProxy"	^(self primitiveGetStringKeyedBy: 'UseGopherProxy') = '1'! !!InternetConfiguration class methodsFor: 'tests' stamp: 'JMM 9/26/2001 19:41'!useHTTPProxy	"Return true if UseHTTPProxy"	"InternetConfiguration useHTTPProxy"	^(self primitiveGetStringKeyedBy: 'UseHTTPProxy') = '1'! !!InternetConfiguration class methodsFor: 'tests' stamp: 'JMM 9/26/2001 19:42'!usePassiveFTP	"Return true if UsePassiveFTP"	"InternetConfiguration usePassiveFTP"	^(self primitiveGetStringKeyedBy: 'UsePassiveFTP') = '1'! !!InternetConfiguration class methodsFor: 'tests' stamp: 'JMM 10/5/2001 11:23'!useSocks	"Return true if UseSocks"	"InternetConfiguration useSocks"	^(self primitiveGetStringKeyedBy: 'UseSocks') = '1'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:05'!getArchiePreferred	"Return the preferred Archie server"	"InternetConfiguration getArchiePreferred"	^self primitiveGetStringKeyedBy: 'ArchiePreferred'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:31'!getDownloadPath	"Return the download path"	"InternetConfiguration getDownloadPath"	^self primitiveGetStringKeyedBy: 'DownLoadPath'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:07'!getEmail	"Return the  email address of user"	"InternetConfiguration getEmail"	^self primitiveGetStringKeyedBy: 'Email'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:08'!getFTPHost	"Return the FTPHost"	"InternetConfiguration getFTPHost"	^self primitiveGetStringKeyedBy: 'FTPHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:09'!getFTPProxyAccount	"Return the second level FTP proxy authorisation"	"InternetConfiguration getFTPProxyAccount"	^self primitiveGetStringKeyedBy: 'FTPProxyAccount'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 20:00'!getFTPProxyHost	"Return the FTP proxy host"	"InternetConfiguration getFTPProxyHost"	^self primitiveGetStringKeyedBy: 'FTPProxyHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 10/3/2001 14:02'!getFTPProxyPassword	"Return the FTP proxy password"	"InternetConfiguration getFTPProxyPassword"	^self primitiveGetStringKeyedBy: 'FTPProxyPassword'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:10'!getFTPProxyUser	"Return the first level FTP proxy authorisation"	"InternetConfiguration getFTPProxyUser"	^self primitiveGetStringKeyedBy: 'FTPProxyUser'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:10'!getFingerHost	"Return the default finger server"	"InternetConfiguration getFingerHost"	^self primitiveGetStringKeyedBy: 'FingerHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:11'!getGopherHost	"Return the default Gopher server"	"InternetConfiguration getGopherHost"	^self primitiveGetStringKeyedBy: 'GopherHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:11'!getGopherProxy	"Return the  Gopher proxy"	"InternetConfiguration getGopherProxy"	^self primitiveGetStringKeyedBy: 'GopherProxy'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:14'!getHTTPProxyHost	"Return the http proxy for this client."	"InternetConfiguration getHTTPProxyHost"	^self primitiveGetStringKeyedBy: 'HTTPProxyHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:14'!getIRCHost	"Return the Internet Relay Chat server"	"InternetConfiguration getIRCHost"	^self primitiveGetStringKeyedBy: 'IRCHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:14'!getLDAPSearchbase	"Return the LDAP thing"	"InternetConfiguration getLDAPSearchbase"	^self primitiveGetStringKeyedBy: 'LDAPSearchbase'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:15'!getLDAPServer	"Return the LDAP server"	"InternetConfiguration getLDAPServer"	^self primitiveGetStringKeyedBy: 'LDAPServer'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 10/5/2001 23:45'!getMacintoshFileTypeAndCreatorFrom: aFileName	"Return the application type and application signature for the file	 for the macintosh file system based on the file ending, the file does not need to exist	failure to find a signature based on the file ending, or because of primitive failure turns nil"	"InternetConfiguration getMacintoshFileTypeAndCreatorFrom: 'test.jpg'"	| string |	string _ self primitiveGetMacintoshFileTypeAndCreatorFrom: aFileName.	string = '********' ifTrue: [^nil].	^Array with: (string first: 4) with: (string last: 4)! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 20:07'!getMailAccount	"Return the mail account user@host.domain"	"InternetConfiguration getMailAccount"	^self primitiveGetStringKeyedBy: 'MailAccount'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 10/3/2001 14:31'!getMailPassword 	"Return the mail account Password "	"InternetConfiguration getMailPassword "	^self primitiveGetStringKeyedBy: 'MailPassword'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:16'!getNNTPHost	"Return the NNTP server"	"InternetConfiguration getNNTPHost"	^self primitiveGetStringKeyedBy: 'NNTPHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:17'!getNTPHost	"Return the  Network Time Protocol (NTP)"	"InternetConfiguration getNTPHost"	^self primitiveGetStringKeyedBy: 'NTPHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 10/3/2001 14:04'!getNewsAuthPassword	"Return the Password for the authorised news servers"	"InternetConfiguration getNewsAuthPassword"	^self primitiveGetStringKeyedBy: 'NewsAuthPassword'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:17'!getNewsAuthUsername	"Return the user name for authorised news servers"	"InternetConfiguration getNewsAuthUsername"	^self primitiveGetStringKeyedBy: 'NewsAuthUsername'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 10/5/2001 10:54'!getNoProxyDomains	"Return a comma seperated string of domains not to proxy"	"InternetConfiguration getNoProxyDomains"	^self primitiveGetStringKeyedBy: 'NoProxyDomains'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 19:36'!getOrganization	"Return the Organization"	"InternetConfiguration getOrganization"	^self primitiveGetStringKeyedBy: 'Organization'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 19:37'!getPhHost	"Return the PhHost server"	"InternetConfiguration getPhHost"	^self primitiveGetStringKeyedBy: 'PhHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 20:04'!getRealName	"Return the RealName"	"InternetConfiguration getRealName"	^self primitiveGetStringKeyedBy: 'RealName'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:19'!getSMTPHost	"Return the SMTP server"	"InternetConfiguration getSMTPHost"	^self primitiveGetStringKeyedBy: 'SMTPHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:19'!getSocksHost	"Return the Socks server"	"InternetConfiguration getSocksHost"	^self primitiveGetStringKeyedBy: 'SocksHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:20'!getTelnetHost	"Return the TelnetHost server"	"InternetConfiguration getTelnetHost"	^self primitiveGetStringKeyedBy: 'TelnetHost'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 19:44'!getWAISGateway	"Return the wais gateway"	"InternetConfiguration getWAISGateway"	^self primitiveGetStringKeyedBy: 'WAISGateway'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 19:44'!getWWWHomePage	"Return the WWW home page url"	"InternetConfiguration getWWWHomePage"	^self primitiveGetStringKeyedBy: 'WWWHomePage'! !!InternetConfiguration class methodsFor: 'lookups' stamp: 'JMM 9/26/2001 17:23'!getWhoisHost	"Return the WhoisHost server"	"InternetConfiguration getWhoisHost"	^self primitiveGetStringKeyedBy: 'WhoisHost'! !!InternetConfiguration class methodsFor: 'system primitives' stamp: 'JMM 10/5/2001 23:44'!primitiveGetMacintoshFileTypeAndCreatorFrom: aFileName	<primitive: 'primitiveGetMacintoshFileTypeAndCreatorFrom' module: 'InternetConfigPlugin'>	^'********' copy ! !!InternetConfiguration class methodsFor: 'system primitives' stamp: 'JMM 9/26/2001 16:31'!primitiveGetStringKeyedBy: aKey	<primitive: 'primitiveGetStringKeyedBy' module: 'InternetConfigPlugin'>	^String new.! !InternetConfiguration initialize!