'From Squeak2.9alpha of 17 July 2000 [latest update: #3285] on 19 January 2001 at 9:10:32 am'!"Change Set:		cmdDragDate:			19 January 2001Author:			Bob ArningImprove cmd-drag of flexed morphs. Still not perfect, but much improved."!!Morph methodsFor: 'meta-actions' stamp: 'RAA 1/19/2001 09:09'!blueButtonDown: anEvent	"Special gestures (cmd-mouse on the Macintosh; Alt-mouse on Windows and Unix) allow a mouse-sensitive morph to be moved or bring up a halo for the morph."	| h tfm doNotDrag |	h _ anEvent hand halo.	"Prevent wrap around halo transfers originating from throwing the event back in"	doNotDrag _ false.	h ifNotNil:[		(h innerTarget == self) ifTrue:[doNotDrag _ true].		(h innerTarget hasOwner: self) ifTrue:[doNotDrag _ true].		(self hasOwner: h target) ifTrue:[doNotDrag _ true]].	tfm _ (self transformedFrom: nil) inverseTransformation.	"cmd-drag on flexed morphs works better this way"	h _ self addHalo: (anEvent transformedBy: tfm).	doNotDrag ifTrue:[^self].	"Initiate drag transition if requested"	anEvent hand 		waitForClicksOrDrag: h		event: (anEvent transformedBy: tfm)		selectors: { nil. nil. #dragTarget:. }		threshold: 5.	"Pass focus explicitly here"	anEvent hand newMouseFocus: h.! !