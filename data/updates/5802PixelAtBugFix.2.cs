'From Squeak3.7alpha of 11 September 2003 [latest update: #5764] on 1 March 2004 at 1:52:06 pm'!"Change Set:		PixelAtBugFixDate:			1 March 2004Author:			Andreas RaabWhen using bit peekers or pokers across snapshots BitBlt may eventually attempt to write into the (compressed) bits of some bitmap, severely screwing up when it finally realizes that it needs to decompress the form. This CS forces unhibernation before the the bits are overwritten.Tests included"!!BitBlt methodsFor: 'copying' stamp: 'ar 3/1/2004 13:49'!pixelAt: aPoint	"Assumes this BitBlt has been set up specially (see the init message,	BitBlt bitPeekerFromForm:.  Returns the pixel at aPoint."	sourceX _ aPoint x.	sourceY _ aPoint y.	destForm unhibernate. "before poking"	destForm bits at: 1 put: 0.  "Just to be sure"	self copyBits.	^ destForm bits at: 1! !!BitBlt methodsFor: 'copying' stamp: 'ar 3/1/2004 13:49'!pixelAt: aPoint put: pixelValue	"Assumes this BitBlt has been set up specially (see the init message,	BitBlt bitPokerToForm:.  Overwrites the pixel at aPoint."	destX _ aPoint x.	destY _ aPoint y.	sourceForm unhibernate. "before poking"	sourceForm bits at: 1 put: pixelValue.	self copyBits"| bb |bb _ (BitBlt bitPokerToForm: Display).[Sensor anyButtonPressed] whileFalse:	[bb pixelAt: Sensor cursorPoint put: 55]"! !!BitBltTest methodsFor: 'bugs' stamp: 'ar 3/1/2004 13:49'!testPeekerUnhibernateBug	| bitBlt |	bitBlt := BitBlt bitPeekerFromForm: Display.	bitBlt destForm hibernate.	self shouldnt:[bitBlt pixelAt: 1@1] raise: Error.! !!BitBltTest methodsFor: 'bugs' stamp: 'ar 3/1/2004 13:49'!testPokerUnhibernateBug	| bitBlt |	bitBlt := BitBlt bitPokerToForm: Display.	bitBlt sourceForm hibernate.	self shouldnt:[bitBlt pixelAt: 1@1 put: 0] raise: Error.! !