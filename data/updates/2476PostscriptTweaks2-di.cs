'From Squeak2.9alpha of 12 June 2000 [latest update: #2473] on 8 August 2000 at 9:01:08 pm'!"Change Set:		PostscriptTweaks2-diDate:			8 August 2000Author:			Dan IngallsMore Postscript tweaks...Can now print rounded corners (they still print square)Can now print antialiased ovals (as in clockMorph)Can now print text that fills a shapeCan now print text that runs around occlusions.Still can't print text on a curve or drop-shadows, though."!!BorderedMorph methodsFor: 'drawing' stamp: 'di 8/8/2000 18:12'!fullDrawOn: aCanvas	(self wantsRoundedCorners and: [aCanvas doesRoundedCorners])		ifTrue:			[self fullDrawWithRoundedCornersOn: aCanvas]		ifFalse:			[super fullDrawOn: aCanvas]! !!Canvas methodsFor: 'testing' stamp: 'di 8/8/2000 18:11'!doesRoundedCorners	^ true! !!PostscriptCanvas methodsFor: 'initialization' stamp: 'di 8/8/2000 18:11'!doesRoundedCorners	^ false! !!EPSCanvas methodsFor: 'as yet unclassified' stamp: 'di 8/8/2000 20:55'!writePSIdentifierRotated: rotateFlag	target print:'%!!PS-Adobe-2.0 EPSF-1.2'; cr.	rotateFlag not  "EPS treats this oppopsite"		ifTrue: [target print: '%%BoundingBox: '; write: psBounds rounded; cr;					print: '90 rotate'; cr;					print: '0 -'; write: psBounds height rounded; print: ' translate'; cr]		ifFalse: [target print: '%%BoundingBox: '; write: psBounds rounded; cr].	target print:'%%Title: '; write:self topLevelMorph externalName; cr.! !!PostscriptCharacterScanner methodsFor: 'displaying' stamp: 'di 8/8/2000 18:21'!displayLine: line offset: baseOffset leftInRun: leftInRun   | drawFont offset |   self setTextStylesForOffset: ((line first) + 1).	" sets up various instance vars from text styles "   drawFont _ self font.   offset _ baseOffset.   offset _ offset + (line left @ (line top + line baseline - drawFont ascent )).    offset _ offset + ((self textStyle alignment caseOf:{	[2] -> [ line paddingWidth /2 ].	[1] -> [ line paddingWidth ] } otherwise:[0]) @ 0).   canvas text: ((paragraph string) copyFrom:line first to:line last)            at: offset             font: drawFont            color: foregroundColor		  justified: ((paragraph textStyle alignment = 3)					and: [ (paragraph text at:line last) ~= Character cr ]) 		  parwidth: line right - line left.! !!SystemWindow methodsFor: 'drawing' stamp: 'di 8/8/2000 18:23'!fullDrawOn: aCanvas	(Preferences roundedWindowCorners and: [aCanvas doesRoundedCorners])		ifTrue: [CornerRounder roundCornersOf: self on: aCanvas					displayBlock:						[aCanvas drawMorph: self.						self basicFullDrawOn: aCanvas]					borderWidth: 2]		ifFalse: [super fullDrawOn: aCanvas]! !PostscriptCanvas removeSelector: #text:at:font:color:justified:!