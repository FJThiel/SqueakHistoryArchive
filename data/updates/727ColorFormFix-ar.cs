'From Squeak 2.3 of January 14, 1999 on 15 March 1999 at 2:30:32 pm'!"Change Set:		ColorFormFix-arDate:			15 March 1999Author:			Andreas RaabFixes ColorForm>>flipBy:centerAt: to preserve the original color map rather than converting it to the standard color map."!!Form methodsFor: 'scaling, rotation' stamp: 'ar 3/15/1999 14:26'!flipBy: direction centerAt: aPoint	"Return a copy of the receiver flipped either #vertical or #horizontal."	| newForm quad |	newForm _ self class extent: self extent depth: depth.	quad _ self boundingBox innerCorners.	quad _ (direction = #vertical ifTrue: [#(2 1 4 3)] ifFalse: [#(4 3 2 1)])		collect: [:i | quad at: i].	(WarpBlt toForm: newForm)		sourceForm: self;		colorMap: (self colormapIfNeededForDepth: depth);		combinationRule: 3;		copyQuad: quad toRect: newForm boundingBox.	newForm offset: (self offset flipBy: direction centerAt: aPoint).	^ newForm"[Sensor anyButtonPressed] whileFalse:	[((Form fromDisplay: (Sensor cursorPoint extent: 130@66))			flipBy: #vertical centerAt: 0@0) display]""Consistency test... | f f2 p | [Sensor anyButtonPressed] whileFalse:	[f _ Form fromDisplay: ((p _ Sensor cursorPoint) extent: 31@41).	Display fillBlack: (p extent: 31@41).	f2 _ f flipBy: #vertical centerAt: 0@0.	(f2 flipBy: #vertical centerAt: 0@0) displayAt: p]"! !!ColorForm methodsFor: 'scaling, rotation' stamp: 'ar 3/15/1999 14:28'!flipBy: direction centerAt: aPoint	| oldColors newForm |	oldColors _ colors.	self colors: nil.	newForm _ super flipBy: direction centerAt: aPoint.	self colors: oldColors.	newForm colors: oldColors.	^newForm ! !