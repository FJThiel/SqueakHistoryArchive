'From Squeak2.8alpha of 16 February 2000 [latest update: #1859] on 17 February 2000 at 4:55:01 pm'!"Change Set:		TranslucentPatterns-arDate:			17 February 2000Author:			Your NameFirst part of Canvas rework. Installs the translucent patterns in Color so the next part will work."!Object subclass: #Color	instanceVariableNames: 'rgb cachedDepth cachedBitPattern '	classVariableNames: 'Black Blue BlueShift Brown CachedColormaps ColorChart ColorNames ComponentMask ComponentMax Cyan DarkGray Gray GrayToIndexMap Green GreenShift HalfComponentMask HighLightBitmaps IndexedColors LightBlue LightBrown LightCyan LightGray LightGreen LightMagenta LightOrange LightRed LightYellow Magenta MaskingMap Orange PaleBlue PaleBuff PaleGreen PaleMagenta PaleOrange PalePeach PaleRed PaleTan PaleYellow PureBlue PureCyan PureGreen PureMagenta PureRed PureYellow RandomStream Red RedShift TranslucentPatterns Transparent VeryDarkGray VeryLightGray VeryPaleRed VeryVeryDarkGray VeryVeryLightGray White Yellow '	poolDictionaries: ''	category: 'Graphics-Display Objects'!!Color class methodsFor: 'class initialization' stamp: 'ar 2/16/2000 21:56'!initializeTranslucentPatterns	"Color initializeTranslucentPatterns"	| mask bits pattern patternList |	TranslucentPatterns _ Array new: 8.	#(1 2 4 8) do:[:d|		patternList _ Array new: 5.		mask _ (1 bitShift: d) - 1.		bits _ 2 * d.		[bits >= 32] whileFalse: [			mask _ mask bitOr: (mask bitShift: bits).  "double the length of mask"			bits _ bits + bits].		"0% pattern"		pattern _ Bitmap with: 0 with: 0.		patternList at: 1 put: pattern.		"25% pattern"		pattern _ Bitmap with: mask with: 0.		patternList at: 2 put: pattern.		"50% pattern"		pattern _ Bitmap with: mask with: mask bitInvert32.		patternList at: 3 put: pattern.		"75% pattern"		pattern _ Bitmap with: mask with: 16rFFFFFFFF.		patternList at: 4 put: pattern.		"100% pattern"		pattern _ Bitmap with: 16rFFFFFFFF with: 16rFFFFFFFF.		patternList at: 5 put: pattern.		TranslucentPatterns at: d put: patternList.	].! !!Color class methodsFor: 'other' stamp: 'ar 2/16/2000 21:56'!translucentMaskFor: alphaValue depth: d	"Return a pattern representing a mask usable for stipple transparency"	^(TranslucentPatterns at: d) at: ((alphaValue min: 1.0 max: 0.0) * 4) rounded + 1! !"Postscript:Initialize the translucent patterns"Color initializeTranslucentPatterns.!