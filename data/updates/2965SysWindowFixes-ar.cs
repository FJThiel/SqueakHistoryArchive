'From Squeak2.9alpha of 13 June 2000 [latest update: #3008] on 14 November 2000 at 12:17:25 am'!"Change Set:		SysWindowFixes-arDate:			14 November 2000Author:			Andreas RaabTwo fixes for system windows - makes pane resizing work again and fixes label positioning."!!SystemWindow methodsFor: 'geometry' stamp: 'ar 11/14/2000 00:05'!extent: newExtent 	isCollapsed		ifTrue: [super extent: newExtent x @ (self labelHeight + 2)]		ifFalse: [super extent: newExtent].	self setStripeColorsFrom: self paneColorToUse.	label fitContents; setWidth: (label width min: bounds width - self labelWidgetAllowance).	label layoutFrame leftOffset: label width negated // 2.	isCollapsed		ifTrue: [collapsedFrame _ self bounds]		ifFalse: [fullFrame _ self bounds]! !!SystemWindow methodsFor: 'geometry' stamp: 'ar 11/14/2000 00:16'!setPaneRectsFromBounds	"Reset proportional specs from actual bounds, eg, after reframing panes"	| layoutBounds box frame left right top bottom |	layoutBounds _ self layoutBounds.	paneMorphs do:[:m|		frame _ m layoutFrame.		box _ m bounds.		frame ifNotNil:[			left _ box left - layoutBounds left - (frame leftOffset ifNil:[0]).			right _ box right - layoutBounds left + (frame rightOffset ifNil:[0]).			top _ box top - layoutBounds top - (frame topOffset ifNil:[0]).			bottom _ box bottom - layoutBounds top + (frame bottomOffset ifNil:[0]).			frame leftFraction: (left / layoutBounds width asFloat).			frame rightFraction: (right / layoutBounds width asFloat).			frame topFraction: (top / layoutBounds height asFloat).			frame bottomFraction: (bottom / layoutBounds height asFloat).		].	].! !!SystemWindow methodsFor: 'label' stamp: 'ar 11/14/2000 00:02'!setLabel: aString	| frame |	labelString _ aString.	label ifNil: [^ self].	label contents: aString.	self labelWidgetAllowance.  "Sets it if not already"	self isCollapsed		ifTrue: [self extent: (label width + labelWidgetAllowance) @ (self labelHeight + 2)]		ifFalse: [label fitContents; setWidth: (label width min: bounds width - labelWidgetAllowance).				label align: label bounds topCenter with: bounds topCenter + (0@borderWidth).				collapsedFrame ifNotNil:					[collapsedFrame _ collapsedFrame withWidth: label width + labelWidgetAllowance]].	frame _ LayoutFrame new.	frame leftFraction: 0.5; topFraction: 0; leftOffset: label width negated // 2.	label layoutFrame: frame.! !