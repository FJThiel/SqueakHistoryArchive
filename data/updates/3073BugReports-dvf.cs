'From Squeak2.9alpha of 13 June 2000 [latest update: #2988] on 26 November 2000 at 10:44:52 am'!"Change Set:		263BugReports-dvfDate:			16 November 2000Author:			Daniel VainsencherInspired by Chris Nortons recent idea, this CS adds a new option to the debugger, mail out bug report, which creates a good basis for such: the reciever, its state, the method vars, the stack, and all the image and vm info I could find.Comments, suggestions, feedback all welcome."!!Debugger methodsFor: 'context stack menu' stamp: 'dvf 11/16/2000 02:58'!contextStackMenu: aMenu shifted: shifted	^ shifted ifFalse: [aMenu labels: 'fullStack (f)restart (r)proceed (p)step (t)send (e)where (w)peel to first like thissenders of... (n)implementors of... (m)inheritance (i)versions (v)inst var refs...inst var defs...class var refs...class variablesclass refs (N)browse full (b)file out mail out bug reportmore...'	lines: #(7 11 13 16 19)	selections: #(fullStack restart proceed doStep send where peelToFirstbrowseSendersOfMessages browseMessages methodHierarchy browseVersionsbrowseInstVarRefs browseInstVarDefsbrowseClassVarRefs browseClassVariables browseClassRefsbrowseMethodFull fileOutMessage mailOutBugReportshiftedYellowButtonActivity)]	ifTrue: [aMenu labels: 'browse class hierarchybrowse classbrowse method (O)implementors of sent messageschange sets with this methodinspect instancesinspect subinstancesrevert to previous versionremove from current change setrevert and forgetmore...' 	lines: #(5 7 10)	selections: #(classHierarchy browseClass 		openSingleMessageBrowser browseAllMessages findMethodInChangeSets 		inspectInstances inspectSubInstances		revertToPreviousVersion 		removeFromCurrentChanges revertAndForget		unshiftedYellowButtonActivity)]! !!Debugger methodsFor: 'context stack menu' stamp: 'dvf 11/16/2000 03:12'!mailOutBugReport	"Compose a useful bug report showing the state of the process as well as vital image statistics as suggested by Chris Norton - 'Squeak could pre-fill the bug form with lots of vital, butoft-repeated, information like what is the image version, last updatenumber, VM version, platform, available RAM, author...'and address it to the list with the appropriate subject prefix."	| subjectPrefix messageStrm |	(Smalltalk includesKey: #Celeste)		ifFalse: [^ self notify: 'no mail reader present'].	subjectPrefix _ '[BUG]'.	Cursor write		showWhile: 			["Prepare the message"			messageStrm _ WriteStream on: (String new: 30).			messageStrm nextPutAll: 'From: ';			 nextPutAll: Celeste userName;			 cr;			 nextPutAll: 'To: squeak@cs.uiuc.edu';			 cr;			 nextPutAll: 'Subject: ';			 nextPutAll: subjectPrefix; 			 nextPutAll: self interruptedContext printString;			 cr;cr;			 nextPutAll: 'here insert explanation of what you were doing, suspect changes youd made and so forth.';cr;cr;			 nextPutAll: 'Image version: ';			 nextPutAll: Smalltalk systemInformationString ; cr;cr;			 nextPutAll: 'VM version: ';			 nextPutAll: Smalltalk vmVersion, String cr, 'for: ', Smalltalk platformName ; cr;cr;			 nextPutAll: 'Receiver: ';			 nextPutAll: receiverInspector object printString; cr;cr;			 nextPutAll: 'Instance variables: ';cr;			 nextPutAll: receiverInspector object longPrintString; cr;			 nextPutAll: 'Method (temp) variables: ';cr;			 nextPutAll: contextVariablesInspector object tempsAndValues; cr;			 nextPutAll: 'Stack: '; cr.			self contextStackList do: [:e | messageStrm nextPutAll: e; cr].			CelesteComposition				openForCeleste: Celeste current 				initialText: messageStrm contents].! !