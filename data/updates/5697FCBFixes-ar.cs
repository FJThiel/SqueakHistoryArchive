'From TeaSqueak3.6 of 8 February 2004 [latest update: #537] on 9 February 2004 at 3:22:36 am'!"Change Set:		FCBFixesDate:			9 February 2004Author:			Andreas RaabFixes a few problems with FileContentsBrowser:- PseudoClass>>commentString didn't answer the string but a string representation of the remote string (huh? ... oh well, just trust me it was wrong).- Filing out from FCB lost the method stamps and produced results which were problematic for change list browser.- FilePackage didn't close the file it was scanning."!!FilePackage methodsFor: 'accessing' stamp: 'ar 2/5/2004 16:17'!fixClassOrder	"Essentially bubble sort the classOrder so that superclasses appear before subclasses"	| superClass index subClass superIndex |	index := 0.	[index < classOrder size] whileTrue:[		subClass := classOrder at: (index := index + 1).		superClass := nil.		subClass isMetaClass ifTrue:[			"Treat non-meta as superclass"			superClass := self classes at: subClass name ifAbsent:[nil].		] ifFalse:[			subClass hasDefinition ifTrue:[				superClass := self classes 					at: (Scanner new scanTokens: subClass definition) first ifAbsent:[nil].				superClass ifNotNil:[superClass hasDefinition ifFalse:[superClass := nil]].			].		].		superClass ifNotNil:[			superIndex := classOrder indexOf: superClass ifAbsent:[self error:'Where is the class?'].			superIndex > index ifTrue:[				"Move superClass before index"				classOrder remove: superClass.				classOrder add: superClass before: subClass.				"Rewind index - we need to check superClass itself"				index := index - 1.			].		].	].! !!FilePackage methodsFor: 'accessing' stamp: 'ar 2/5/2004 15:11'!removeDoIts	doIts := OrderedCollection new.! !!FilePackage methodsFor: 'initialize' stamp: 'ar 2/5/2004 15:14'!fromFileNamed: aName	| stream |	fullName := aName.	stream := FileStream readOnlyFileNamed: aName.	[self fileInFrom: stream] ensure:[stream close].! !!PseudoClass methodsFor: 'class' stamp: 'ar 2/5/2004 15:18'!commentString	^self comment asString! !!PseudoClass methodsFor: 'fileIn/fileOut' stamp: 'ar 2/7/2004 01:04'!fileOutMethods: aCollection on: aStream	"FileOut all methods with selectors taken from aCollection"	| cat categories |	categories := Dictionary new.	aCollection do:[:sel|		cat := self organization categoryOfElement: sel.		cat = self removedCategoryName ifFalse:[			(categories includesKey: cat) 				ifFalse:[categories at: cat put: Set new].			(categories at: cat) add: sel].	].	categories associationsDo:[:assoc|		cat := assoc key.		assoc value do:[:sel|			aStream cr.			(self sourceCode at: sel) fileOutOn: aStream.		].	].! !!PseudoClass methodsFor: 'printing' stamp: 'ar 2/5/2004 16:04'!printOn: aStream	super printOn: aStream.	aStream nextPut:$(; print: name; nextPut:$)! !