'From Squeak2.9alpha of 17 July 2000 [latest update: #2546] on 31 August 2000 at 11:34:41 am'!"Change Set:		lastEventFixDate:			31 August 2000Author:			Bob Arning- update lastEvent in HandMorph>>specialDrag: so that synthesized events will be correct. This fixes the sometimes funky actions of cmd-drag."!!HandMorph methodsFor: 'special gestures' stamp: 'RAA 8/31/2000 11:31'!specialDrag: evt	"Special drag (cmd-mouse on the Macintosh) allows a morph to be dragged without grabbing it and thus without removing it from its owner or changing its z-order." 	| halo itsOwner |	self position ~= evt cursorPoint		ifTrue: [self position: evt cursorPoint].	lastEvent _ evt.	mouseDownMorph		ifNil:    ["Waiting for more than 5 pixels move to start drag"				(self position dist: targetOffset) > 5					ifTrue: [(halo _ self world haloMorphOrNil) ifNil: [^ self].							mouseDownMorph _ halo target.							targetOffset _ targetOffset - mouseDownMorph positionInWorld.							halo removeAllHandlesBut: nil.							mouseDownMorph setProperty: #specialDragging toValue: true]]		ifNotNil: [mouseDownMorph isWorldMorph ifFalse:					[mouseDownMorph setConstrainedPositionFrom:						(mouseDownMorph pointFromWorld:							(mouseDownMorph griddedPoint: self position - targetOffset))].	 mouseDownMorph ifNotNil:		[((itsOwner _ mouseDownMorph topRendererOrSelf owner) notNil and:			[itsOwner automaticViewing]) ifTrue:				[mouseDownMorph openViewerForArgument]]]! !