'From Squeak3.2alpha of 14 October 2001 [latest update: #4599] on 10 January 2002 at 7:25:59 pm'!"Change Set:		ircEmote-lsDate:			4 July 2001Author:			Lex SpoonMake emote's look proper"!!IRCChannelObserver methodsFor: 'as yet unclassified' stamp: 'ls 7/4/2001 23:10'!ircMessageRecieved: aMessage	| sender newLine |	sender _ aMessage sender ifNil: [ 'me' ].	(sender includes: $!!) ifTrue: [ sender _ sender copyFrom: 1 to: (sender indexOf: $!!)-1 ].	newLine _ aMessage textForDisplay, String cr.	chatText _ chatText, newLine.	chatText size > 2000 ifTrue: [		chatText _ chatText copyFrom: (chatText size - 1000) to: chatText size ].	self changed: #chatText.! !!IRCMessage methodsFor: 'access' stamp: 'ls 7/4/2001 23:28'!textForDisplay	"text to display in a chat window"	| senderToDisplay |	senderToDisplay _ sender ifNil: [ 'me' ].	(senderToDisplay includes: $!!) ifTrue: [ senderToDisplay _ senderToDisplay copyFrom: 1 to: (sender indexOf: $!!)-1 ].	(text beginsWith: (Character value: 1) asString) ifTrue: [		"an emote"		| endMarker |		endMarker := text indexOf: (Character space) startingAt: 2 ifAbsent: [ 0 ].		endMarker > 0 ifTrue: [			| emoteType |			emoteType := text copyFrom: 2 to: endMarker-1.			emoteType := emoteType asLowercase.			emoteType = 'action' ifTrue: [				"definitely an emote"				| action |				action := text copyFrom: endMarker +1 to: text size.				^senderToDisplay, ' ', action ] ] ].	^(Text string: senderToDisplay emphasis: (Array with: TextEmphasis bold)), 		': ', self text! !