'From Squeak2.7 of 5 January 2000 [latest update: #1782] on 13 January 2000 at 3:01:17 pm'!"Change Set:		PkgBrowserTweaksDate:			13 January 2000Author:			Stephen Travis PopeThis change set repairs a bug that kept the find class andrecent menu items from working in the current version of the packagebrowser (*and* it removes more code than it adds). The menu functions didnot select the class category for the found class."!!Browser methodsFor: 'system category list' stamp: 'stp 01/13/2000 12:25'!selectCategoryForClass: theClass	self systemCategoryListIndex: (self systemCategoryList indexOf: theClass category)! !!Browser methodsFor: 'system category functions' stamp: 'stp 01/13/2000 12:26'!findClass	"Search for a class by name."	| pattern foundClass classNames index toMatch exactMatch potentialClassNames |	self okToChange ifFalse: [^ self classNotFound].	pattern _ FillInTheBlank request: 'Class name or fragment?'.	pattern isEmpty ifTrue: [^ self classNotFound].	toMatch _ (pattern copyWithout: $.) asLowercase.	potentialClassNames _ self potentialClassNames asOrderedCollection.	classNames _ pattern last = $. 		ifTrue: [potentialClassNames select:					[:nm |  nm asLowercase = toMatch]]		ifFalse: [potentialClassNames select: 					[:n | n includesSubstring: toMatch caseSensitive: false]].	classNames isEmpty ifTrue: [^ self classNotFound].	exactMatch _ classNames detect: [:each | each asLowercase = toMatch] ifNone: [nil].	index _ classNames size = 1		ifTrue:	[1]		ifFalse:	[exactMatch			ifNil: [(PopUpMenu labelArray: classNames lines: #()) startUp]			ifNotNil: [classNames addFirst: exactMatch.				(PopUpMenu labelArray: classNames lines: #(1)) startUp]].	index = 0 ifTrue: [^ self classNotFound].	foundClass _ Smalltalk at: (classNames at: index) asSymbol. 	self selectCategoryForClass: foundClass.	self selectClass: foundClass! !!Browser methodsFor: 'class list' stamp: 'stp 01/13/2000 12:57'!recent	"Let the user select from a list of recently visited classes.  11/96 stp.	 12/96 di:  use class name, not classes themselves.	 : dont fall into debugger in empty case"	| className class recentList |	recentList _ RecentClasses select: [:n | Smalltalk includesKey: n].	recentList size == 0 ifTrue: [^ self beep].	className := (SelectionMenu selections: recentList) startUp.	className == nil ifTrue: [^ self].	class := Smalltalk at: className.	self selectCategoryForClass: class.	self classListIndex: (self classList indexOf: class name)! !!PackageBrowser methodsFor: 'system category list' stamp: 'stp 01/13/2000 12:59'!selectCategoryForClass: theClass	"Set the package and category lists to display the given class."	| cat |	cat := theClass category.	self packageListIndex: (self packageList indexOf: (cat copyUpTo: $-)).		self systemCategoryListIndex: (self systemCategoryList indexOf: 			(cat copyFrom: ((cat indexOf: $- ifAbsent: [0]) + 1) to: cat size)).! !PackageBrowser removeSelector: #findClass!PackageBrowser removeSelector: #selectCategory:!PackageBrowser removeSelector: #recent!