'From Squeak2.9alpha of 13 June 2000 [latest update: #3031] on 17 November 2000 at 7:12:06 pm'!"Change Set:		MoreSysWindow-arDate:			17 November 2000Author:			Andreas RaabProvides a little smarter layout conversion for system windows. Also includes Bob's fix for resizing panes."!!Debugger methodsFor: 'initialize' stamp: 'ar 11/17/2000 19:09'!buildMorphicNotifierLabelled: label message: messageString	| notifyPane window contentTop extentToUse |	window _ (PreDebugWindow labelled: label) model: self.	contentTop _ 0.2.	extentToUse _ 450 @ 156. "nice and wide to show plenty of the error msg"	window addMorph: (self buttonRowForPreDebugWindow: window)				frame: (0@0 corner: 1 @ contentTop).		notifyPane _ PluggableTextMorph on: self text: nil accept: nil		readSelection: nil menu: #debugProceedMenu:.	notifyPane editString: (self preDebugNotifierContentsFrom: messageString);		askBeforeDiscardingEdits: false.	window addMorph: notifyPane frame: (0@contentTop corner: 1@1).	"window deleteCloseBox.		chickened out by commenting the above line out, sw 8/14/2000 12:54"	window setBalloonTextForCloseBox.	^ window openInWorldExtent: extentToUse! !!LayoutFrame methodsFor: 'layout' stamp: 'ar 11/17/2000 19:11'!layout: oldBounds in: newBounds	"Return the proportional rectangle insetting the given bounds"	| left right top bottom |	leftFraction ifNotNil:[		left _ newBounds left + (newBounds width * leftFraction).		leftOffset ifNotNil:[left _ left + leftOffset]].	rightFraction ifNotNil:[		right _ newBounds right - (newBounds width * (1.0 - rightFraction)).		rightOffset ifNotNil:[right _ right - rightOffset]].	topFraction ifNotNil:[		top _ newBounds top + (newBounds height * topFraction).		topOffset ifNotNil:[top _ top + topOffset]].	bottomFraction ifNotNil:[		bottom _ newBounds bottom - (newBounds height * (1.0 - bottomFraction)).		bottomOffset ifNotNil:[bottom _ bottom - bottomOffset]].	left ifNil:[ right 			ifNil:[left _ oldBounds left. right _ oldBounds right]			ifNotNil:[left _ right - oldBounds width]].	right ifNil:[right _ left + oldBounds width].	top ifNil:[ bottom 			ifNil:[top _ oldBounds top. bottom _ oldBounds bottom]			ifNotNil:[top _ bottom - oldBounds height]].	bottom ifNil:[bottom _ top + oldBounds height].	^(left rounded @ top rounded) corner: (right rounded @ bottom rounded)! !!SystemWindow methodsFor: 'panes' stamp: 'ar 11/17/2000 19:07'!addMorph: aMorph frame: relFrame	| frame |	frame _ LayoutFrame new.	frame 		leftFraction: relFrame left; 		rightFraction: relFrame right; 		topFraction: relFrame top; 		bottomFraction: relFrame bottom.	frame topOffset: self labelHeight.	frame bottomFraction = 1.0 ifFalse:[		frame bottomOffset: self labelHeight negated].	aMorph layoutFrame: frame.	aMorph hResizing: #spaceFill; vResizing: #spaceFill.	self addMorph: aMorph.	paneMorphs _ paneMorphs copyReplaceFrom: 1 to: 0 with: (Array with: aMorph).	aMorph borderWidth: 1.	aMorph color: self paneColor.! !