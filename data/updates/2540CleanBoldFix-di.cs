'From Squeak2.9alpha of 12 June 2000 [latest update: #2537] on 30 August 2000 at 10:15:21 am'!!StrikeFont methodsFor: 'character shapes' stamp: 'di 8/30/2000 10:00'!characterFormAt: character put: characterForm	"Copy characterForm over the glyph for the argument, character."	| ascii leftX rightX widthDif newGlyphs |	ascii _ character asciiValue.	ascii < minAscii ifTrue: [^ self error: 'Cant store characters below min ascii'].	ascii > maxAscii ifTrue:		[(self confirm:'This font does not accomodate ascii values higher than ' , maxAscii printString , '.Do you wish to extend it permanently to handle values up to ' , ascii printString)			ifTrue: [self extendMaxAsciiTo: ascii]			ifFalse: [^ self error: 'No change made']].	leftX _ xTable at: ascii + 1.	rightX _ xTable at: ascii + 2.	widthDif _ characterForm width - (rightX - leftX).	widthDif ~= 0 ifTrue:		["Make new glyphs with more or less space for this char"		newGlyphs _ Form extent: (glyphs width + widthDif) @ glyphs height.		newGlyphs copy: (0@0 corner: leftX@glyphs height)			from: 0@0 in: glyphs rule: Form over.		newGlyphs copy: ((rightX+widthDif)@0 corner: newGlyphs width@glyphs height)			from: rightX@0 in: glyphs rule: Form over.		glyphs _ newGlyphs.		"adjust further entries on xTable"		xTable _ xTable copy.		ascii+2 to: xTable size			do: [:i | xTable at: i put: (xTable at: i) + widthDif]].	glyphs copy: (leftX @ 0 extent: characterForm extent)		from: 0@0 in: characterForm rule: Form over"| f |  f _ TextStyle defaultFont.f characterFormAt: $  put: (Form extent: (f widthOf: $ )+10@f height)"! !!StrikeFont methodsFor: 'character shapes' stamp: 'di 8/30/2000 10:15'!ensureCleanBold 	"This ensures that all character glyphs have at least one pixel of white space on the right	so as not to cause artifacts in neighboring characters in bold or italic."	| wider glyph |	emphasis = 0 ifFalse: [^ self].	minAscii to: maxAscii do:		[:i | glyph _ self characterFormAt: (Character value: i).		(glyph copy: (glyph boundingBox topRight - (1@0)					corner: glyph boundingBox bottomRight)) isAllWhite ifFalse:			[wider _ Form extent: (glyph width + 1)@glyph height.			glyph displayOn: wider.			self characterFormAt: (Character value: i) put: wider]]."StrikeFont allInstancesDo: [:f | f ensureCleanBold].(StrikeFont familyName: 'NewYork' size: 21) ensureCleanBold.StrikeFont shutDown.  'Flush synthetic fonts'."! !