'From Squeak3.6beta of ''4 July 2003'' [latest update: #5331] on 9 July 2003 at 5:37:55 pm'!"Change Set:		newMethodNoCatSel-asmDate:			09 July 2003Author:			Alejandro Magistrello09 July 2003-open a browser, change to the class side, choose -show comments from the class pane menu or hit the '?' button, you''l see the class definition instead of the class commentsee Browser.editComment, changed some order and added two self changed: #mess.., don''t like it, but seems to work.27 June 2003:-open a browser, select a class, select a method without selecting a method category, now enter a new method with some sintactic error in the code, your code is cleared and no way to return to it.25 June 2003:-update 5262 caused that if you don't have a method category selected and try to enter a new method, you get an error.this tries to fix that-set the preference #annotationPanes to true, open a browser and select a method on the instance side of a class, now change to the class side, note that the annotationPane is not updated.added self changed: #annotation to Browser.metaclassIndicated:"!!Browser methodsFor: 'class functions' stamp: 'asm 7/9/2003 17:28'!editComment	"Retrieve the description of the class comment."	classListIndex = 0 ifTrue: [^ self].	self okToChange ifFalse: [^ self].	self messageCategoryListIndex: 0.	metaClassIndicated _ false.	editSelection _ #editComment.	self changed: #classSelectionChanged.	self changed: #messageCategoryList.	self changed: #messageList.	self decorateButtons.	self contentsChanged! !!Browser methodsFor: 'code pane' stamp: 'asm 6/25/2003 22:48'!compileMessage: aText notifying: aController	"Compile the code that was accepted by the user, placing the compiled method into an appropriate message category.  Return true if the compilation succeeded, else false."	| fallBackCategoryIndex fallBackMethodIndex originalSelectorName result |	self selectedMessageCategoryName ifNil:			[ self selectOriginalCategoryForCurrentMethod 											ifFalse:["Select the '--all--' category"											self messageCategoryListIndex: 1]]. 	self selectedMessageCategoryName asSymbol = ClassOrganizer allCategory		ifTrue:			[ "User tried to save a method while the ALL category was selected"			fallBackCategoryIndex _ messageCategoryListIndex.			fallBackMethodIndex _ messageListIndex.			editSelection == #newMessage				ifTrue:					[ "Select the 'as yet unclassified' category"					messageCategoryListIndex _ 0.					(result _ self defineMessageFrom: aText notifying: aController)						ifNil:							["Compilation failure:  reselect the original category & method"							messageCategoryListIndex _ fallBackCategoryIndex.							messageListIndex _ fallBackMethodIndex]						ifNotNil:							[self setSelector: result]]				ifFalse:					[originalSelectorName _ self selectedMessageName.					self setOriginalCategoryIndexForCurrentMethod.					messageListIndex _ fallBackMethodIndex _ self messageList indexOf: originalSelectorName.								(result _ self defineMessageFrom: aText notifying: aController)						ifNotNil:							[self setSelector: result]						ifNil:							[ "Compilation failure:  reselect the original category & method"							messageCategoryListIndex _ fallBackCategoryIndex.							messageListIndex _ fallBackMethodIndex.							^ result notNil]].			self changed: #messageCategoryList.			^ result notNil]		ifFalse:			[ "User tried to save a method while the ALL category was NOT selected"			^ (self defineMessageFrom: aText notifying: aController) notNil]! !!Browser methodsFor: 'message category list' stamp: 'asm 7/9/2003 13:52'!selectOriginalCategoryForCurrentMethod	"private - Select the message category for the current method. 	 	 Note:  This should only be called when somebody tries to save  	 a method that they are modifying while ALL is selected. 	 	 Returns: true on success, false on failure."	| aSymbol selectorName |	aSymbol _ self categoryOfCurrentMethod.	selectorName _ self selectedMessageName.	(aSymbol notNil and: [aSymbol ~= ClassOrganizer allCategory])		ifTrue: 			[messageCategoryListIndex _ (self messageCategoryList indexOf: aSymbol).			messageListIndex _ (self messageList indexOf: selectorName).			^ true].	^ false! !!Browser methodsFor: 'metaclass' stamp: 'asm 6/26/2003 00:24'!metaClassIndicated: trueOrFalse 	"Indicate whether browsing instance or class messages."	metaClassIndicated _ trueOrFalse.	self setClassOrganizer.	systemCategoryListIndex > 0 ifTrue:		[editSelection _ classListIndex = 0			ifTrue: [metaClassIndicated				ifTrue: [#none]				ifFalse: [#newClass]]			ifFalse: [#editClass]].	messageCategoryListIndex _ 0.	messageListIndex _ 0.	contents _ nil.	self changed: #classSelectionChanged.	self changed: #messageCategoryList.	self changed: #messageList.	self changed: #contents.	self changed: #annotation.	self decorateButtons! !