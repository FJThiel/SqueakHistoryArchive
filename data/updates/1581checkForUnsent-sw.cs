'From Squeak2.6 of 11 October 1999 [latest update: #1579] on 27 October 1999 at 2:45:05 pm'!"Change Set:		checkForUnsent-swDate:			27 October 1999Author:			Scott WallaceAdds a feature in the change sorter allowing you to check a change set for unsent messages.  Look in the shifted side of the change-set-list's menu.Also fixes the long-standing bug that included, in a method-list browser for a change-set, vacuous entries for methods added but then removed.Also fixes a bug in update 1569 that could make MethodMorphs work improperly for class-side methods."!!ChangeSet methodsFor: 'method changes' stamp: 'sw 10/27/1999 14:40'!changedMessageList	"Used by a message set browser to access the list view information."	| messageList |	messageList _ SortedCollection new.	methodChanges associationsDo: 		[:clAssoc | 		clAssoc value associationsDo: 			[:mAssoc | (#(remove addedThenRemoved) includes: mAssoc value) ifFalse:				[messageList add: clAssoc key asString, ' ' , mAssoc key]]].	^ messageList asArray! !!ChangeSet methodsFor: 'fileIn/Out' stamp: 'sw 10/27/1999 14:22'!checkForUnsentMessages	| nameLine allChangedSelectors augList unsent messageList |	nameLine _ '"', self name, '"'.	allChangedSelectors _ Set new.	(augList _ self changedMessageListAugmented) do:		[:aChange |			MessageSet parse: aChange toClassAndSelector: [:cls :sel | allChangedSelectors add: sel]].	unsent _ Smalltalk allUnSentMessagesIn: allChangedSelectors.	unsent size = 0		ifTrue:			[self inform: 'There are no unsent messages in change set', nameLine]		ifFalse:			[messageList _ augList select:				[:aChange |					MessageSet parse: aChange toClassAndSelector:						[:cls :sel | unsent includes: sel]].			Smalltalk browseMessageList: messageList name: 'Unsent messages in ', nameLine]! !!ChangeSorter methodsFor: 'changeSet menu' stamp: 'sw 10/27/1999 14:20'!checkForUnsentMessages	"Open a message list browser on all unsent messages in the current change set"	myChangeSet checkForUnsentMessages! !!ChangeSorter methodsFor: 'changeSet menu' stamp: 'sw 10/27/1999 14:44'!shiftedChangeSetMenu: aMenu	aMenu add: 'conflicts with other change sets' action: #browseMethodConflicts.	aMenu balloonTextForLastItem: 'Browse all methods that occur both in this change set and in at least one other change set.'.	parent ifNotNil:		[aMenu add: 'conflicts with opposite side' action: #methodConflictsWithOtherSide.			aMenu balloonTextForLastItem: 'Browse all methods that occur both in this change set and in the one on the opposite side of the change sorter.'.].	aMenu addLine.	aMenu add: 'check for slips' action: #lookForSlips.	aMenu balloonTextForLastItem: 'Check this change set for halts and references to Transcript.'.	aMenu add: 'check for unsent messages' action: #checkForUnsentMessages.	aMenu balloonTextForLastItem:'Check this change set for messages that are not sent anywhere in the system'.	aMenu addLine.	aMenu add: 'inspect change set' action: #inspectChangeSet.	aMenu balloonTextForLastItem: 'Open an inspector on this change set. (There are some details in a change set which you don''t see in a change sorter.)'.	aMenu add: 'update' action: #update.	aMenu balloonTextForLastItem: 'Update the display for this change set.  (This is done automatically when you activate this window, so is seldom needed.)'.	aMenu add: 'go to change set''s project' action: #goToChangeSetsProject.	aMenu balloonTextForLastItem: 'If this change set is currently associated with a Project, go to that project right now.'.	aMenu add: 'file into new...' action: #fileIntoNewChangeSet.	aMenu balloonTextForLastItem: 'Load a fileout from disk and place its changes into a new change set (seldom needed -- much better to do this from a file-list browser these days.)'.	aMenu add: 'clear' action: #clearChangeSet.	aMenu balloonTextForLastItem: 'Reset this change set to a pristine state where it holds no information. CAUTION: this is destructive and irreversible!!'.	aMenu addLine.	aMenu add: 'more...' action: #unshiftedYellowButtonActivity.	aMenu balloonTextForLastItem: 'Takes you back to the primary change-set menu.'.	^ aMenu! !!MethodHolder methodsFor: 'as yet unclassified' stamp: 'sw 10/27/1999 14:30'!selectedClassOrMetaClass	^ methodClass! !MethodHolder removeSelector: #selectedClassOrMetaclass!