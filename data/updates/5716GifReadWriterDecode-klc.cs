'From Squeak3.7alpha of ''11 September 2003'' [latest update: #5657] on 26 January 2004 at 1:04:04 pm'!"Change Set:		GifReadWriterDecodingIssues-klc-1Date:			26 January 2004Author:			Ken CauseyIt seems that someone started some changes to handle comment blocks in GIF files but never finshed it.  The code was completely unused and buggy (the block terminator was not being processed) and there was no way to tell what the goal of it was, so I removed it.  This fixes a problem with reading GIF files with comments."!!GIFReadWriter methodsFor: 'private-decoding' stamp: 'KLC 1/25/2004 14:04'!readBody	"Read the GIF blocks. Modified to return a form.  "	| form extype block blocksize packedFields delay1 |	form _ nil.	[stream atEnd] whileFalse: [		block _ self next.		block = Terminator ifTrue: [^ form].		block = ImageSeparator ifTrue: [			form isNil				ifTrue: [form _ self readBitData]				ifFalse: [self skipBitData].		] ifFalse: [			block = Extension				ifFalse: [^ form "^ self error: 'Unknown block type'"].			"Extension block"			extype _ self next.	"extension type"			extype = 16rF9 ifTrue: [  "graphics control"				self next = 4 ifFalse: [^ form "^ self error: 'corrupt GIF file'"].				"====				Reserved                      3 Bits				Disposal Method               3 Bits				User Input Flag               1 Bit				Transparent Color Flag        1 Bit				===" 				packedFields _ self next.				delay1 := self next.	"delay time 1"				delay := (self next*256 + delay1) *10.	 "delay time 2"				transparentIndex _ self next.				(packedFields bitAnd: 1) = 0 ifTrue: [transparentIndex _ nil].				self next = 0 ifFalse: [^ form "^ self error: 'corrupt GIF file'"].			] ifFalse: [				"Skip blocks"				[(blocksize _ self next) > 0]					whileTrue: [						"Read the block and ignore it and eat the block terminator"						self next: blocksize]]]]! !GIFReadWriter removeSelector: #comment:!