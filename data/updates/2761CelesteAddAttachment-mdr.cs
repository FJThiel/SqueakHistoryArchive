'From Squeak2.9alpha of 13 June 2000 [latest update: #2657] on 29 September 2000 at 10:30:53 am'!"Change Set:		CelesteAddAttachmentDate:			31 August 2000Author:			Mike RutenbergThis was the message whose attachment was unnamed because ofanother Celeste bug."!!CelesteComposition methodsFor: 'interface' stamp: 'mdr 8/31/2000 18:37'!addAttachment	| file fileResult fileName |	textEditor		ifNotNil: [self hasUnacceptedEdits ifTrue: [textEditor accept]].	"transform into multipart if needed"	self hasAttachments ifFalse: [self transformToMultipart].	"then simply append another attachment section"	(fileResult _ StandardFileMenu oldFile)		ifNotNil: 			[fileName _ fileResult directory fullNameFor: fileResult name.			file _ FileStream readOnlyFileNamed: fileName.			file ifNotNil: [self messageText: ((MailMessage from: self messageText)						asTextEncodingNewPart: file named: fileResult name)]] ! !