"Change Set:		8240Files-nice.31Files-nice.31:1) correct #nextLine and #upToAnyOf: using a new message #collectionSpecies2) correct #insertLineFeeds (unused) to work whatever the line end conventions"!!FileStream methodsFor: 'accessing' stamp: 'nice 11/22/2009 18:11'!next: anInteger	| newCollection howManyRead increment |	newCollection := self collectionSpecies new: anInteger.	howManyRead := 0.	[howManyRead < anInteger] whileTrue:		[self atEnd ifTrue:			[(howManyRead + 1) to: anInteger do: [:i | newCollection at: i put: (self next)].			^newCollection].		increment := (readLimit - position) min: (anInteger - howManyRead).		newCollection replaceFrom: (howManyRead + 1)			to: (howManyRead := howManyRead + increment)			with: collection			startingAt: (position + 1).		position := position + increment].	^newCollection! !!StandardFileStream methodsFor: 'properties-setting' stamp: 'nice 11/22/2009 18:21'!insertLineFeeds	"(FileStream oldFileNamed: 'BBfix2.st') insertLineFeeds"	| s crLf f |	crLf := String crlf.	s := self next: self size.	self close.	f := FileStream newFileNamed: self name.	s linesDo: [:line | f nextPutAll: line; nextPutAll: crLf].	f close! !!StandardFileStream methodsFor: 'private' stamp: 'nice 11/22/2009 18:03'!collectionSpecies	"Answer the species of collection into which the receiver can stream"		^buffer1 species! !