"Change Set:		9612Traits-ar.282Traits-ar.282:Avoid dictionary protocol in Smalltalk."!!Trait class methodsFor: 'load-unload' stamp: 'ar 3/5/2010 21:10'!convertClassToTrait: aClass	"Convert the given class to a trait"	| aTrait |	"Move the class out of the way"	aClass environment removeKey: aClass name.	"Create the trait in its place"	aTrait := Trait named: aClass name				uses: {}				category: aClass category.	aClass organization commentRemoteStr ifNotNil:[		aTrait classComment: aClass organization classComment 				stamp: aClass organization commentStamp].	aClass selectorsAndMethodsDo:[:sel :meth|		aTrait compile: (aClass sourceCodeAt: sel)			classified: (aClass organization categoryOfElement: sel)			withStamp: (aClass compiledMethodAt: sel) timeStamp			notifying: nil].	aClass classSide selectorsAndMethodsDo:[:sel :meth|		aTrait classSide compile: (aClass classSide sourceCodeAt: sel)			classified: (aClass classSide organization categoryOfElement: sel)			withStamp: (aClass classSide compiledMethodAt: sel) timeStamp			notifying: nil].	aClass obsolete.	^aTrait! !!Trait class methodsFor: 'load-unload' stamp: 'ar 3/5/2010 21:11'!convertTraitToClass: aTrait	"Convert the given trait to a class"	| aClass |	"Move the trait out of the way"	aTrait environment removeKey: aTrait name.	"Create the class in its place"	aClass := Object subclass: aTrait name				instanceVariableNames: ''				classVariableNames: ''				poolDictionaries: ''				category: aTrait category.	aTrait organization commentRemoteStr ifNotNil:[		aClass classComment: aTrait organization classComment 				stamp: aTrait organization commentStamp].	aTrait selectorsAndMethodsDo:[:sel :meth|		aClass compile: (aTrait sourceCodeAt: sel)			classified: (aTrait organization categoryOfElement: sel)			withStamp: (aTrait compiledMethodAt: sel) timeStamp			notifying: nil].	aTrait classSide selectorsAndMethodsDo:[:sel :meth|		aClass classSide compile: (aTrait classSide sourceCodeAt: sel)			classified: (aTrait classSide organization categoryOfElement: sel)			withStamp: (aTrait classSide compiledMethodAt: sel) timeStamp			notifying: nil].	aTrait obsolete.	^aClass! !