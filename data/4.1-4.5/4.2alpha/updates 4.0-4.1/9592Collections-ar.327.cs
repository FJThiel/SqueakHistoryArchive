"Change Set:		9592Collections-ar.327Collections-ar.327:Avoid dictionary protocol in Smalltalk."!!LookupKey methodsFor: 'bindings' stamp: 'ar 3/5/2010 20:24'!beBindingOfType: aClass announcing: aBool	"Make the receiver a global binding of the given type"	| old new |	(Smalltalk globals associationAt: self key) == self		ifFalse:[^self error:'Not a global variable binding'].	self class == aClass ifTrue:[^self].	old := self.	new := aClass key: self key value: self value.	old become: new.	"NOTE: Now self == read-only (e.g., the new binding)"	^self recompileBindingsAnnouncing: aBool! !!Association methodsFor: 'objects from disk' stamp: 'ar 3/5/2010 20:26'!objectForDataStream: refStrm	| dp |	"I am about to be written on an object file.  If I am a known global, write a proxy that will hook up with the same resource in the destination system."	^ (Smalltalk globals associationAt: key ifAbsent: [nil]) == self 		ifTrue: [dp := DiskProxy global: #Smalltalk selector: #associationOrUndeclaredAt: 							args: (Array with: key).			refStrm replace: self with: dp.			dp]		ifFalse: [self]! !