"Change Set:		8604ToolBuilder-Morphic-nice.47ToolBuilder-Morphic-nice.47:Cosmetic: move or remove a few temps inside closures"!!PluggableListMorphPlus methodsFor: 'drag and drop' stamp: 'nice 12/27/2009 03:37'!startDrag: evt 		dragItemSelector ifNil:[^self].	evt hand hasSubmorphs ifTrue: [^ self].	[ | dragIndex draggedItem ddm |	(self dragEnabled and: [model okToChange]) ifFalse: [^ self].	dragIndex := self rowAtLocation: evt position.	dragIndex = 0 ifTrue:[^self].	draggedItem := model perform: dragItemSelector with: dragIndex.	draggedItem ifNil:[^self].	ddm := TransferMorph withPassenger: draggedItem from: self.	ddm dragTransferType: #dragTransferPlus.	evt hand grabMorph: ddm]		ensure: [Cursor normal show.			evt hand releaseMouseFocus: self]! !!MorphicToolBuilder methodsFor: 'pluggable widgets' stamp: 'nice 12/27/2009 03:11'!buildPluggablePanel: aSpec	| widget children |	widget := PluggablePanelMorph new.	self register: widget id: aSpec name.	widget model: aSpec model.	widget color: Color transparent.	widget clipSubmorphs: true.	children := aSpec children.	children isSymbol ifTrue:[		widget getChildrenSelector: children.		widget update: children.		children := #().	].	self buildAll: children in: widget.	self setFrame: aSpec frame in: widget.	parent ifNotNil:[self add: widget to: parent].	self setLayout: aSpec layout in: widget.	widget layoutInset: 0.	widget borderWidth: 0.	widget submorphsDo:[:sm| | frame |		(frame := sm layoutFrame) ifNotNil:[			(frame rightFraction = 0 or:[frame rightFraction = 1]) 				ifFalse:[frame rightOffset:1].			(frame bottomFraction = 0 or:[frame bottomFraction = 1]) 				ifFalse:[frame bottomOffset: 1]]].	widget color: Color transparent.	^widget! !!ChooserTool methodsFor: 'toolbuilder' stamp: 'nice 12/27/2009 02:52'!buildWindowWith: builder specs: specs	| windowSpec |	windowSpec := self buildWindowWith: builder.	specs do:[:assoc|		| rect action widgetSpec |		rect := assoc key.		action := assoc value.		widgetSpec := action value.		widgetSpec ifNotNil:[			widgetSpec frame: rect.			windowSpec children add: widgetSpec]].	^windowSpec! !