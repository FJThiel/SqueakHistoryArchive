"Change Set:		7856Collections-ar.141Collections-ar.141:Merging Collections-ul.140:- removed unused #scanForNil: implementations (replaced by #scanForEmptySlotFor:), updated comments in #scanFor:"!!WeakKeyDictionary methodsFor: 'private' stamp: 'ul 9/20/2009 05:13'!scanFor: anObject	"Scan the key array for the first slot containing either a nil (indicating an empty slot) or an element that matches anObject. Answer the index of that slot or zero if no slot is found. This method will be overridden in various subclasses that have different interpretations for matching elements."	| element start finish |	finish := array size.	start := (anObject hash \\ finish) + 1.		"Search from (hash mod size) to the end."	start to: finish do:		[:index | ((element := array at: index) == nil or: [element key = anObject])			ifTrue: [^ index ]].	"Search from 1 to where we started."	1 to: start-1 do:		[:index | ((element := array at: index) == nil or: [element key = anObject])			ifTrue: [^ index ]].	^ 0  "No match AND no empty slot"! !!WeakIdentityKeyDictionary methodsFor: 'private' stamp: 'ul 9/20/2009 05:13'!scanFor: anObject	"Scan the key array for the first slot containing either a nil (indicating an empty slot) or an element that matches anObject. Answer the index of that slot or zero if no slot is found. This method will be overridden in various subclasses that have different interpretations for matching elements."	| element start finish hash |	finish := array size.	finish > 4096		ifTrue: [hash := anObject identityHash * (finish // 4096)]		ifFalse: [hash := anObject identityHash].	start := (hash \\ finish) + 1.	"Search from (hash mod size) to the end."	start to: finish do:		[:index | ((element := array at: index) == nil or: [element key == anObject])			ifTrue: [^ index ]].	"Search from 1 to where we started."	1 to: start-1 do:		[:index | ((element := array at: index) == nil or: [element key == anObject])			ifTrue: [^ index ]].	^ 0  "No match AND no empty slot"! !WeakIdentityKeyDictionary removeSelector: #scanForNil:!WeakKeyDictionary removeSelector: #scanForNil:!