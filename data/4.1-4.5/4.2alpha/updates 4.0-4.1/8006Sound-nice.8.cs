"Change Set:		8006Sound-nice.8Sound-nice.8:use #fasterKeys"!!PianoRollScoreMorph methodsFor: 'event handling' stamp: 'nice 10/19/2009 22:20'!mouseMove: evt	| noteMorphs chordRect sound |	soundsPlaying ifNil: [^ self].	self autoScrollForX: evt cursorPoint x.	"Play all notes at the cursor time"	noteMorphs := self notesInRect: ((evt cursorPoint extent: 1@0) expandBy: 0@self height).	chordRect := (self innerBounds withLeft: evt cursorPoint x) withWidth: 1.	soundsPlayingMorph delete.	soundsPlayingMorph := Morph newBounds: chordRect color: Color green.	self addMorphBack: soundsPlayingMorph.		noteMorphs do:		[:m |  "Add any new sounds"		(soundsPlaying includesKey: m)			ifFalse: [sound := m soundOfDuration: 999.0.					soundsPlaying at: m put: sound.					SoundPlayer resumePlaying: sound quickStart: false]].	soundsPlaying fasterKeys do:		[:m |  "Remove any sounds no longer in selection."		(noteMorphs includes: m)			ifFalse: [(soundsPlaying at: m) stopGracefully.					soundsPlaying removeKey: m]].! !!AbstractSound class methodsFor: 'sound library' stamp: 'nice 10/19/2009 21:53'!updateFMSounds	"AbstractSound updateFMSounds"	Sounds fasterKeys do: [:k |		((Sounds at: k) isKindOf: FMSound) ifTrue: [			Sounds removeKey: k ifAbsent: []]].	(FMSound class organization listAtCategoryNamed: #instruments) do:		[:sel | Sounds at: sel asString put: (FMSound perform: sel)].! !!AbstractSound class methodsFor: 'sound library-file in/out' stamp: 'nice 10/19/2009 21:52'!unloadSampledTimbres	"This can be done to unload those bulky sampled timbres to shrink the image. The unloaded sounds are replaced by a well-known 'unloaded sound' object to enable the unloaded sounds to be detected when the process is reversed."	"AbstractSound unloadSampledTimbres"	Sounds fasterKeys do: [:soundName |		(((Sounds at: soundName) isKindOf: SampledInstrument) or:		 [(Sounds at: soundName) isKindOf: LoopedSampledSound]) ifTrue: [			Sounds at: soundName put: self unloadedSound]].	self updateScorePlayers.	Smalltalk garbageCollect.! !!SampledSound class methodsFor: 'sound library' stamp: 'nice 10/19/2009 22:25'!soundNames	"Answer a list of sound names for the sounds stored in the sound library."	"| s |	 SampledSound soundNames asSortedCollection do: [:n |		n asParagraph display.		s := SampledSound soundNamed: n.		s ifNotNil: [s playAndWaitUntilDone]]"	^ SoundLibrary fasterKeys! !!AbstractSound class methodsFor: 'sound library' stamp: 'nice 10/19/2009 21:51'!soundNames	^ Sounds fasterKeys sort! !