"Change Set:		7845ToolBuilder-Morphic-ar.39ToolBuilder-Morphic-ar.39:Face Lift: A few tweaks for MorphicToolBuilder to make it work better with Botox."!!MorphicToolBuilder methodsFor: 'pluggable widgets' stamp: 'ar 9/16/2009 23:14'!buildPluggableText: aSpec	| widget |	widget := PluggableTextMorphPlus on: aSpec model				text: aSpec getText 				accept: aSpec setText				readSelection: aSpec selection 				menu: aSpec menu.	widget font: Preferences standardCodeFont.	self register: widget id: aSpec name.	widget getColorSelector: aSpec color.	self setFrame: aSpec frame in: widget.	parent ifNotNil:[self add: widget to: parent].	widget borderColor: Color lightGray.	widget color: Color white.	^widget! !!MorphicToolBuilder methodsFor: 'private' stamp: 'ar 9/16/2009 23:11'!setLayout: layout in: widget	layout == #proportional ifTrue:[		widget layoutPolicy: ProportionalLayout new.		^self].	layout == #horizontal ifTrue:[		widget layoutPolicy: TableLayout new.		widget listDirection: #leftToRight.		widget submorphsDo:[:m| m hResizing: #spaceFill; vResizing: #spaceFill].		widget cellInset: 1@1.		widget layoutInset: 1@1.		widget color: Color transparent.		"and then some..."		^self].	layout == #vertical ifTrue:[		widget layoutPolicy: TableLayout new.		widget listDirection: #topToBottom.		widget submorphsDo:[:m| m hResizing: #spaceFill; vResizing: #spaceFill].		widget cellInset: 1@1.		widget layoutInset: 1@1.		widget color: Color transparent.		"and then some..."		^self].	^self error: 'Unknown layout: ', layout.! !!MorphicToolBuilder methodsFor: 'pluggable widgets' stamp: 'ar 9/16/2009 23:15'!buildPluggableCodePane: aSpec	"Install the default styler for code panes.	Implementation note: We should just be doing something like, e.g.,		^(self buildPluggableText: aSpec) useDefaultStyler	Unfortunately, this will retrieve and layout the initial text twice which	can make for a noticable performance difference when looking at some	larger piece of code. So instead we copy the implementation from 	buildPlugggableText: here and insert #useDefaultStyler at the right point"	| widget |	widget := PluggableTextMorphPlus new.	widget useDefaultStyler.	widget on: aSpec model				text: aSpec getText 				accept: aSpec setText				readSelection: aSpec selection 				menu: aSpec menu.	widget font: Preferences standardCodeFont.	self register: widget id: aSpec name.	widget getColorSelector: aSpec color.	self setFrame: aSpec frame in: widget.	parent ifNotNil:[self add: widget to: parent].	widget borderColor: Color lightGray.	widget color: Color white.	^widget! !!MorphicToolBuilder methodsFor: 'pluggable widgets' stamp: 'ar 9/16/2009 23:12'!buildPluggablePanel: aSpec	| widget children frame |	widget := PluggablePanelMorph new.	self register: widget id: aSpec name.	widget model: aSpec model.	widget color: Color transparent.	widget clipSubmorphs: true.	children := aSpec children.	children isSymbol ifTrue:[		widget getChildrenSelector: children.		widget update: children.		children := #().	].	self buildAll: children in: widget.	self setFrame: aSpec frame in: widget.	parent ifNotNil:[self add: widget to: parent].	self setLayout: aSpec layout in: widget.	widget layoutInset: 0.	widget borderWidth: 0.	widget submorphsDo:[:sm|		(frame := sm layoutFrame) ifNotNil:[			(frame rightFraction = 0 or:[frame rightFraction = 1]) 				ifFalse:[frame rightOffset:1].			(frame bottomFraction = 0 or:[frame bottomFraction = 1]) 				ifFalse:[frame bottomOffset: 1]]].	widget color: Color transparent.	^widget! !