'From SqueakLight|II of 31 May 2008 [latest update: #7224] on 3 June 2009 at 12:01:29 pm'!Object subclass: #MCPackage	instanceVariableNames: 'name resources '	classVariableNames: ''	poolDictionaries: ''	category: 'Monticello-Base'!!MCMczWriter methodsFor: 'visiting' stamp: 'edc 6/3/2009 08:46'!writeResources: aVersion 	| local resources member |	resources := aVersion package resources.	resources		keysAndValuesDo: [:fname :file | 			local := 'resources/' , fname.			member := zip addString: file reset contents as: local.			member desiredCompressionMethod: ZipArchive compressionDeflated]! !!MCPackage methodsFor: 'as yet unclassified' stamp: 'edc 6/3/2009 11:43'!resources: aDict	self packageInfo resources: aDict! !!MCPackage class methodsFor: 'as yet unclassified' stamp: 'edc 6/3/2009 11:50'!named: aString resources: aDict 	| instance |	instance := self new name: aString.	instance 		 resources: aDict.	^ instance! !!MCRepositoryGroup methodsFor: 'as yet unclassified' stamp: 'edc 6/3/2009 08:37'!clearRepositories			repositories := #()		! !!MCVersionReader class methodsFor: '*monticello-file services' stamp: 'edc 6/3/2009 11:55'!loadVersionStream: stream fromDirectory: directory 	| version |	version := self versionFromStream: stream.	directory isRemoteDirectory		ifFalse: [version workingCopy repositoryGroup				addRepository: (MCDirectoryRepository new directory: directory)].	version load! !!PackageInfo methodsFor: 'resources' stamp: 'edc 6/3/2009 08:42'!addResources	resources		ifNil: [resources := Dictionary new].	window := PackageResources basicNew.	window thisPackage: self.	window initialize! !!PackageInfo methodsFor: 'resources' stamp: 'edc 6/2/2009 08:40'!clearResources	 resources :=Dictionary new! !!PackageInfo methodsFor: 'resources' stamp: 'edc 6/2/2009 10:30'!moreResources	| result full |	result := FileList2 modalFileSelector.	full := result directory fullNameFor: result name.	resources		at: result localName		put: (RWBinaryOrTextStream with: (StandardFileStream readOnlyFileNamed: full) contents).	^self viewResources! !!PackageInfo methodsFor: 'resources' stamp: 'edc 6/2/2009 10:33'!resources		^ resources! !!PackageInfo methodsFor: 'resources' stamp: 'edc 6/2/2009 10:29'!viewResources	"Answer the value of resources"	resources		ifEmpty: [^#()]		ifNotEmpty: [^ resources keys asSortedCollection]! !!PackageResources methodsFor: 'accessing' stamp: 'edc 6/2/2009 09:53'!resources		^ self thisPackage resources! !!PackageResources methodsFor: 'accessing' stamp: 'edc 6/2/2009 10:19'!viewResources	^ self thisPackage viewResources! !!PackageResources methodsFor: 'as yet unclassified' stamp: 'edc 6/2/2009 10:21'!buildWith: builder 	"Create the ui for the browser"	| windowSpec listSpec buttonSpec panelSpec |	self resourcesListIndex: 0.	windowSpec := builder pluggableWindowSpec new.	windowSpec model: self.	windowSpec label: 'PackageInfoResources Browser'.	windowSpec children: OrderedCollection new.	listSpec := builder pluggableListSpec new.	listSpec model: self;		 list: #viewResources;		 getIndex: #resourcesListIndex;		 setIndex: 0;		 menu: #resourcesListMenu:;				frame: (0 @ 0 corner: 0.7 @ 1.0).	windowSpec children add: listSpec.	panelSpec := builder pluggablePanelSpec new.	panelSpec		frame: (0.7 @ 0.1 corner: 0.95 @ 0.95).	panelSpec children: OrderedCollection new.	windowSpec children addLast: panelSpec.	buttonSpec := builder pluggableButtonSpec new.	buttonSpec model: self thisPackage;		 label: 'addFiles';		 state: true;		 action: #moreResources;				frame: (0 @ 0 corner: 0.95 @ 0.95).	panelSpec children addLast: buttonSpec.	^ builder build: windowSpec! !!PackageResources methodsFor: 'initialize-release' stamp: 'edc 6/2/2009 08:16'!initialize		modal := false.	resources :=Dictionary new.	Smalltalk		at: #ToolBuilder		ifPresent: [:tb | 			tb open: self.			^ self].	^ self window openInWorldExtent: self defaultExtent;		 yourself! !Object subclass: #MCPackage	instanceVariableNames: 'name'	classVariableNames: ''	poolDictionaries: ''	category: 'Monticello-Base'!"Postscript:Leave the line above, and replace the rest of this comment by a useful one.Executable statements should follow this comment, and shouldbe separated by periods, with no exclamation points (!!).Be sure to put any further comments in double-quotes, like this one."MCMczReader register!