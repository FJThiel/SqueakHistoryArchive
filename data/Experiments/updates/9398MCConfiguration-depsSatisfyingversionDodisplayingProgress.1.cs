'From Squeak3.11alpha of 13 February 2010 [latest update: #9483] on 9 March 2010 at 11:11:23 am'!!MCConfiguration methodsFor: 'private' stamp: 'edc 3/8/2010 10:52'!depsSatisfying: selectBlock versionDo: verBlock displayingProgress: progressString 	| repoMap count packagesInThis existe |	repoMap := Dictionary new.	packagesInThis := #('311Deprecated' 'Balloon' 'Collections' 'Compiler' 'Compression' 'Exceptions' 'Files' 'Graphics' 'Kernel' 'MinimalMorphic'  'Morphic' 'MorphicExtras' 'Multilingual' 'Network' 'PackageInfo-Base' 'ST80' 'SUnit' 'Services' 'ShoutCore' 'Sound' 'Squeak-Version' 'System' 'ToolBuilder-Kernel' 'ToolBuilder-MVC' 'ToolBuilder-Morphic' 'ToolBuilder-SUnit' 'Tools' 'Traits' 'TraitsTests' 'TrueType'). "this is needed until we agree on the polished changes go to trunk and become the default to all." .	self repositories		do: [:repo | 			MCRepositoryGroup default addRepository: repo.			repo allVersionNames				ifEmpty: [self logWarning: 'cannot read from ' , repo description]				ifNotEmptyDo: [:all | all						do: [:ver | repoMap at: ver put: repo]]].	count := 0.	self dependencies		do: [:dep | 			| ver repo | 			existe := packagesInThis includes: dep package name.			existe				ifTrue: [ver := dep versionInfo name.					repo := repoMap								at: ver								ifAbsent: [self logError: 'Version ' , ver , ' not found in any repository'.									self logError: 'Aborting'.									^ count].					(selectBlock value: dep)						ifTrue: [| new | 							new := self										versionNamed: ver										for: dep										from: repo.							new								ifNil: [self logError: 'Could not download version ' , ver , ' from ' , repo description.									self logError: 'Aborting'.									^ count]								ifNotNil: [self logUpdate: dep package with: new.									ProgressNotification signal: '' extra: 'Installing ' , ver.									verBlock value: new.									count := count + 1]].					dep package workingCopy repositoryGroup addRepository: repo]				ifFalse: [self logWarning: 'NOT LOADING ' , dep package name printString]]		displayingProgress: progressString.	^ count! !