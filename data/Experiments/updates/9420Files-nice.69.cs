'From Squeak3.11alpha of 13 February 2010 [latest update: #9483] on 9 March 2010 at 11:11:23 am'!!StandardFileStream methodsFor: 'open/close' stamp: 'nice 2/26/2010 00:31'!open: fileName forWrite: writeMode 	"Open the file with the given name. If writeMode is true, allow writing, otherwise open the file in read-only mode."	"Changed to do a GC and retry before failing ar 3/21/98 17:25"	| f |	f := fileName asVmPathName.	fileID := StandardFileStream retryWithGC:[self primOpen: f writable: writeMode] 					until:[:id| id notNil] 					forFileNamed: fileName.	fileID ifNil: [^ nil].  "allows sender to detect failure"	name := fileName.	self register.	rwmode := writeMode.	buffer1 := String new: 1.	self enableReadBuffering	! !