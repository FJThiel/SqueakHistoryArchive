'From Squeak3.11alpha of 13 February 2010 [latest update: #9483] on 9 March 2010 at 11:11:24 am'!!ChangeSet methodsFor: 'fileIn/Out' stamp: 'edc 10/1/2009 09:53'!fileOut	"File out the receiver, to a file whose name is a function of the 	change-set name and either of the date & time or chosen to have a 	unique numeric tag, depending on the preference 	'changeSetVersionNumbers'"	| slips nameToUse internalStream |	self checkForConversionMethods.	ChangeSet promptForDefaultChangeSetDirectoryIfNecessary.	self name endsWithDigit ifTrue:[nameToUse := self name ,  FileDirectory dot , FileStream cs]	ifFalse:[	nameToUse := Preferences changeSetVersionNumbers				ifTrue: [self defaultChangeSetDirectory nextNameFor: self name extension: FileStream cs]				ifFalse: [self name , FileDirectory dot , Utilities dateTimeSuffix , FileDirectory dot , FileStream cs]].	nameToUse := nameToUse asJoliet.		nameToUse := self defaultChangeSetDirectory fullNameFor: nameToUse.	Cursor write		showWhile: [internalStream := WriteStream						on: (String new: 10000).			internalStream header; timeStamp.			self fileOutPreambleOn: internalStream.			self fileOutOn: internalStream.			self fileOutPostscriptOn: internalStream.			internalStream trailer.			FileStream				writeSourceCodeFrom: internalStream				baseName: (nameToUse copyFrom: 1 to: nameToUse size - 3)				isSt: false				useHtml: false].	Preferences checkForSlips		ifFalse: [^ self].	slips := self checkForSlips.	(slips size > 0			and: [(PopUpMenu withCaption: 'Methods in this fileOut have haltsor references to the Transcriptor other ''slips'' in them.Would you like to browse them?' chooseFrom: 'Ignore\Browse slips')					= 2])		ifTrue: [self systemNavigation browseMessageList: slips name: 'Possible slips in ' , name]! !!Utilities class methodsFor: 'fetching updates' stamp: 'edc 3/9/2010 11:09'!exportingCs"Utilities exportingCs"Preferences setPreference: #checkForSlips toValue: false.ChangeSet defaultChangeSetDirectory: ( FileDirectory default directoryNamed: 'updates').ChangeSet allChangeSets  do: [:cs |     cs fileOut].Preferences setPreference: #checkForSlips toValue: true.! !!Utilities class methodsFor: 'fetching updates' stamp: 'edc 6/10/2009 07:51'!slUpdates	"Utilities slUpdates"	| previousHighest server dir count sourceFile fileName pos x |	previousHighest := SystemVersion current highestUpdate.	server := ServerDirectory serverNamed: 'SL'.	dir := server directoryNamed: 'SLupdates'.	count := 0.	dir entries		select: [:c | 			x := c name initialIntegerOrNil.			x				ifNil: [x := 0].			x > previousHighest]		thenCollect: [:any | 			(any name endsWith: '.sqz')				ifTrue: [fileName := any name.					pos := fileName findString: '.sqz'.					fileName := fileName copyFrom: 1 to: pos - 1.					sourceFile := HTTPLoader default retrieveContentsFor: 'ftp.squeak.org/various_images/SqueakLight//SLupdates/' , any name.					sourceFile := RWBinaryOrTextStream with: sourceFile content unzipped]				ifFalse: [sourceFile := RWBinaryOrTextStream with: (dir getFileNamed: any name) contents.					sourceFile reset.					self saveUpdate: sourceFile onFile: any name].			ChangeSorter newChangesFromStream: sourceFile named: any name.			count := count + 1].	PopUpMenu inform: count asString , ' new update file(s) processed.'.	SystemVersion current registerUpdate: ChangeSorter highestNumberedChangeSet.	SmalltalkImage current aboutThisSystem.! !